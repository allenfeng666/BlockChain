define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-oauthsignin-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"siteConfig",ddoKeyJwtLogout:"jwtLogout",ddoKeySocialProfile:"getSocialProviderProfile",ddoKeySitelProfile:"mergedProfile",ddoKeyCreateProfile:"createProfile",ddoKeyRedirectionData:"",validateJwtToken:"validateJwtToken",ddoKeyGetAppLogOut:"getAppLogOut",ddoKeyIsProfileUpdated:"isProfileUpdated",ddoKeyViewProfile:"viewProfile",ddoKeyJobCartCountV2:"jobCartCountV2",ddoKeyValidateEmail:"validateEmail",ddoKeyValidateCanTrackId:"validateCanTrackId",ddoKeyUpdateThirdPartyId:"updatethirdpartyid",ddoKeyMasterData:"profileMasterData"}}}),define("v1/ph-oauthsignin-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-oauthsignin-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return(e||{})[t]})},e.prototype.getProfileMasterData=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.OauthsigninService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-oauthsignin",["require","exports","aurelia-framework","ph-common","./ph-oauthsignin-config","./ph-oauthsignin-service","aurelia-event-aggregator"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="ph-oauthsignin-v1",c={createProfile:"createProfile",oauthLi:"view1",login:"login",logout:"logout",myProfile:"myProfile",socialsso:"socialsso",imProfile:"imProfile",imSignin:"imSignin",serviceDownBanner:"serviceDownBanner",validateCandidateId:"canTrack",validateEmail:"validateEmail"},l=function(e){function t(t,o,i,a,r,n,c){var l=e.call(this,t,o,s)||this;return l.commonService=o,l.localStorage=i,l.oSigninService=a,l.cookieManager=r,l.eventAggregator=n,l.validationController=c,l.isSiteLogin=!1,l.countryComplaince=!1,l.disableAction=!1,l.viewType=null,l.oBasicProfile={},l.basicProfileForm={},l.showUpdateProfile=null,l.validateCanTrackIdErrorMsg="",l.referer="",l.pathName="",l.showErrorMsg=!1,l.isLoggingOut=!1,l.showDropDown=!1,l.onLoginError=null,l._countriesData=[],l._errorMessages={},l.user={isLoggedIn:null,userId:"",userType:"",siteType:"",socialProvider:"",showServiceDownBanner:null,redirectUri:"",logoutSuccess:null,addRedirectionUri:!1,isSiteLogin:!1,isSocialLogin:!1,email:"",profile:{firstName:"",middleName:"",lastName:"",preferredName:"",preferredFirstName:""}},l._user={},l.providerKey={FACEBOOK:"facebook",MICROSOFT:"microsoft",MICROSOFTCORPORATE:"microsoftCorporate",LINKEDINCORPORATE:"linkedinCorporate",LINKEDIN:"linkedIn",GOOGLE:"google"},l.providerCode={linkedin:"linkedIn",live_aad:"microsoftCorporate",google:"google",live:"microsoft",facebook:"facebook"},l.providers={},l.loginErrors={hasErrorThree:!1},l.handleLoginStatus=function(e,t){"ph-login"==e&&l.getValidJwtToken()},l.rootDomain=l.commonService.getRootDomain(),l.updateRootDomain(),l}return __extends(t,e),t.prototype.created=function(){window.phApp&&(window.phApp.loginStatus=this.handleLoginStatus),this.onLoginError=e.prototype.getQueryParam.call(this,"errorCode")},t.prototype.updateRootDomain=function(e){var t=window.phApp;this.baseDomain=e?this.rootDomain||t.baseDomain:t.baseDomain,i.logger.info("ROOT_DOMAIN: + "+t.rootDomain),i.logger.info("BASE_DOMAIN: + "+t.baseDomain)},t.prototype.handlePage=function(){var t=this,o={};switch(this.mode){case c.createProfile:e.prototype.hideLoader.call(this),this.countryComplaince?this.getCountryWithBasicProfile():this.getBasicProfile(),this._errorMessages.createprofile=[];break;case c.socialsso:case c.oauthLi:case c.login:this.onLoginError&&"three"===this.onLoginError&&(this.loginErrors.hasErrorThree=!0),this.handleLoginPage();break;case c.myProfile:this.eventAggregator.subscribe("loggedin",function(e){t.user.isLoggedIn=e.state}),this.user.isLoggedIn&&this.getFullProfile(),this.eventAggregator.subscribe("PROFILE_UPDATED",function(e){t.user.profile.firstName=e.firstName,t.user.profile.middleName=e.middleName,t.user.profile.preferredName=e.preferredName||"",t.user.profile.preferredFirstName=e.preferredFirstName||"",t.user.profile.lastName=e.lastName,!0===e.bannerFlag&&t.handleServicesDown(e.bannerFlag)});break;case c.logout:if(e.prototype.unhideLoader.call(this),this.localStorage.setItem("countryComplaince-_-"+window.location.href,{countryComplaince:this.countryComplaince,isFor:"complaince"}),!0===this.user.isLoggedIn)this.dologout();else if(!1===this.countryComplaince){var i=this.commonService.getBaseUrl();window.location.href=i}break;case c.imProfile:this.imInit();break;case c.imSignin:this.eventAggregator.subscribe("social-logout",function(){t.user.isLoggedIn=!1});break;case c.validateEmail:e.prototype.unhideLoader.call(this),o={token:e.prototype.getQueryParam.call(this,"token")},this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyValidateEmail,o).then(function(e){window.location.assign(t.commonService.getBaseUrl()+"login")});break;case c.validateCandidateId:e.prototype.unhideLoader.call(this),o={guid:e.prototype.getQueryParam.call(this,"guid")},this.localStorage.setItem("ph$$diug",o),this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyValidateCanTrackId,o).then(function(o){e.prototype.hideLoader.call(t),200==o.status?window.location.assign(t.commonService.getBaseUrl()+"login"):(t.localStorage.removeItem("ph$$diug"),t.showErrorMsg=!0,t.validateCanTrackIdErrorMsg=o.message)})}},t.prototype.handleSocialSSO=function(){if(this.mode===c.socialsso){var t=e.prototype.getQueryParam.call(this,"authType"),o=e.prototype.getQueryParam.call(this,"sendAfterAuthURL");if(t){var i=this.providerCode[t];this.doSSOlogin(i,o)}else window.location=this.commonService.getBaseUrl()}},t.prototype.getFullProfile=function(){var e=this,t={};this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyViewProfile,t).then(function(t){if(t&&t.profile){var o=t.profile;e.user.profile=o}else e.user.profile={firstName:"",preferredFirstName:"",preferredName:"",middleName:"",lastName:""}})},t.prototype.handlePagePath=function(t,o){t.preventDefault();var i=this.localStorage.getItem("countryComplaince-_-"+window.location.href)||{},a=i.countryComplaince;this.localStorage.removeItem("countryComplaince-_-"+window.location.href);var r=this.commonService.getBaseUrl(),n=r;if(-1===r.lastIndexOf("/")&&(n+="/"),a)n+="login",window.location.href=n;else{var s=this.commonService.getPageName(),c=e.prototype.getQueryParam.call(this,"qpage")||window.location.pathname+window.location.search;c=decodeURIComponent(c),s=e.prototype.getQueryParam.call(this,"page")||s,s=decodeURIComponent(s),n+="login",window.location.href=n+"?qpage="+encodeURIComponent(c)+"&page="+s}},t.prototype.redirectToPage=function(e,t){var o=this.commonService.getBaseUrl();window.location.href=t?o+t:o},t.prototype.handleLoginPage=function(){var t=this;e.prototype.unhideLoader.call(this),this.commonService.getPageName(),this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKey).then(function(o){var a=o.data||{},r=a.siteSettings&&a.siteSettings.oauth;r?(t.providers=r,e.prototype.hideLoader.call(t),t.handleSocialSSO()):i.logger.info("siteconfig data not available...")})},t.prototype.attached=function(){e.prototype.attached.call(this),this.getValidJwtToken()},t.prototype.onError=function(){i.logger.info("onerror")},t.prototype.redirectMSCorp=function(){var e=this.providerKey,t=this.providers[e.MICROSOFTCORPORATE],o=t.loginUrl+"?response_type="+t.msal.response_type+"&response_mode="+t.msal.response_mode+"&";o+="client_id="+encodeURIComponent(t.clientId)+"&prompt=none&",t.resource&&(o+="resource="+encodeURIComponent(t.resource)+"&"),o+="redirect_uri="+encodeURIComponent(this.commonService.getRootDomain()+t.redirectUri),t.scope&&(o+="&scope="+encodeURIComponent(t.msal.scope)),window.location.assign(o)},t.prototype.redirectToProvider=function(e,t){var o=this.providerKey,i=e.loginUrl+"?response_type="+e.response_type+"&";switch(t){case o.MICROSOFT:case o.LINKEDIN:case o.LINKEDINCORPORATE:case o.MICROSOFTCORPORATE:i+="client_id="+encodeURIComponent(e.clientId)+"&",e.resource&&(i+="resource="+encodeURIComponent(e.resource)+"&");break;case o.GOOGLE:i+="client_id="+encodeURIComponent(e.clientId)+"&access_type=offline&approval_prompt=auto&";break;case o.FACEBOOK:i+="client_id="+encodeURIComponent(e.clientId)+"&"}if(t){if(i+="redirect_uri="+encodeURIComponent(e.redirectUriPath),e.scope&&(i+="&scope="+encodeURIComponent(e.scope)),e.state){var a=encodeURIComponent(e.state);t===o.FACEBOOK&&a&&(a=a.substring(1)),i+="&state="+a}window.location.href=i}else this.disableAction=!1},t.prototype.getLoacale=function(){var e=this.commonService.getLocale();return e=e.split("_"),e="/"+e[1]+"/"+e[0]+"/"},t.prototype.dologin=function(t,o){this.disableAction=!0;var a=e.prototype.getQueryParam.call(this,"qpage")||"";a=decodeURIComponent(a);var r=e.prototype.getQueryParam.call(this,"page")||"",n=this.providers[t],s=this.getLoacale(),c=this.commonService.getLocale(),l=window.location.pathname;a||(l+=window.location.search);var d={page:l,protocol:window.location.protocol,localePath:s,qpage:a,pagename:r,locale:c};o?(d.t="ns",d.page=l):this.user.addRedirectionUri&&(d.page=l),n?(n.redirectUriPath=this.commonService.getRootDomain()+n.redirectUri,n.state=JSON.stringify(d),this.redirectToProvider(n,t)):i.logger.info("provider doesnt exist")},t.prototype.doSSOlogin=function(e,t){this.disableAction=!0;var o=t;o=decodeURIComponent(o);var a=t,r=this.providers[e],n=this.getLoacale(),s=this.commonService.getLocale(),c={page:o,protocol:window.location.protocol,localePath:n,qpage:o,pagename:a,locale:s,sso:!0};r?(r.redirectUriPath=this.commonService.getRootDomain()+r.redirectUri,r.state=JSON.stringify(c),this.redirectToProvider(r,e)):i.logger.info("provider doesnt exist")},t.prototype.handleSignout=function(e){window.location.href=this.commonService.getBaseUrl()+"logout"},t.prototype.handleLogOut=function(t){var o=this;e.prototype.unhideLoader.call(this),this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyJwtLogout,{}).then(function(t){e.prototype.hideLoader.call(o),t.status&&"SUCCESS"==t.status.toUpperCase()&&t.data&&"string"==typeof t.data?window.location.href=t.data:window.location.href=o.commonService.getBaseUrl()+"logout",e.prototype.raiseEvent.call(o,"social-logout",{})},function(t){e.prototype.hideLoader.call(o),new Error(t)})},t.prototype.dologout=function(){var t=this;this.isLoggingOut=!0,this.eventAggregator.publish("loggedin",{state:null}),this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyGetAppLogOut).then(function(o){!o||"success"!=o.status&&200!=o.status?(t.user.logoutSuccess=!1,t.eventAggregator.publish("loggedin",{state:!0})):(t.localStorage.removeItem("ph$$diug"),t.user.logoutSuccess=!0,t.eventAggregator.publish("loggedin",{state:!1}),t.eventAggregator.publish("jobCartUpdatedCount",""),t.commonService.raiseCustomEvent&&t.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount","")),e.prototype.hideLoader.call(t),t.isLoggingOut=!1})},t.prototype.doIMLogout=function(){var t=this,o=a.WidgetConfig.v1.ddoKeyJwtLogout;e.prototype.unhideLoader.call(this),this.oSigninService.makeDDORequest(s,o).then(function(o){e.prototype.hideLoader.call(t),o.status&&"SUCCESS"==o.status.toUpperCase()&&o.data&&"string"==typeof o.data?window.location.href=o.data:window.location.href=t.commonService.getRootDomain()},function(o){e.prototype.hideLoader.call(t),new Error(o)})},t.prototype.imInit=function(){var e=this;document.addEventListener("click",function(){e.showDropDown=!1})},t.prototype.toggleDropDown=function(e){this.showDropDown=!this.showDropDown,e.stopPropagation()},t.prototype.getValidJwtToken=function(){var t=this;this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.validateJwtToken).then(function(o){if(t.updateState(o),t.validate(),t.handlePage(),e.prototype.hideLoader.call(t),t.user.isLoggedIn&&c.logout!==t.mode){var r=t.getCanTrackIdValue();if(r){i.logger.info("ph$$diug available");var n={thirdPartyId:r};t.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyUpdateThirdPartyId,n).then(function(e){200==e.status&&(t.localStorage.removeItem("ph$$diug"),i.logger.info("ph$$diug removed"))})}else i.logger.info("ph$$diug unavailable")}})},t.prototype.validate=function(){var e=this;this.user.isLoggedIn&&this.mode===c.oauthLi&&this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyIsProfileUpdated).then(function(t){t&&"linkedin"!=t.socialProvider&&(e.showUpdateProfile=!t.profileUpdated)})},t.prototype.updateState=function(e){var t=e||{},o=t.data||{};this.user.isLoggedIn=o.isValidToken||!1,this.user.userId=o.userId||"",this.user.isSiteLogin=o.isSiteLogin||!1,this.user.isSocialLogin=o.isSocialLogin||!1,this.user.userType=o.userType||"",this.user.siteType=o.siteType||"",this.user.socialProvider=o.socialProvider||"",this.user.redirectUri=o.redirectUri||"/",this.pageName=this.user.redirectUri,this.user.addRedirectionUri=!o.redirectionUriNotRequired;var i=t.bannerFlag||o.bannerFlag;200!=e.status&&"success"!==e.status||this.commonService.setDdoRespToStore("validateJwtToken",e),!1!==i&&!0!==i||this.handleServicesDown(i),this.isSiteLogin&&this.getProfile()},t.prototype.handleServicesDown=function(e){window.dispatchEvent(new CustomEvent("ON_SERVICES_DOWN",{detail:e})),phApp.$isServicesDown=e},t.prototype.getProfile=function(){var t=this;e.prototype.unhideLoader.call(this),this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeySitelProfile,{}).then(function(o){i.logger.info(o),o&&o.email&&(t.user.email=o.email),e.prototype.hideLoader.call(t)})},t.prototype.getBasicProfile=function(){var t=this;e.prototype.unhideLoader.call(this),this.validationController.validationErrors={};var o={};this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeySocialProfile,o).then(function(o){e.prototype.hideLoader.call(t),t.commonService.setValidationRules(phApp.validationRules||{}),t.commonService.setLangBundle(phApp.messages||{});var i=o.data;i&&(i.statusCode?(t.showError("E4444"),t.authReminder=i.message||o.message||"",e.prototype.hideLoader.call(t)):t.oBasicProfile=i),t.basicProfileForm=JSON.parse(JSON.stringify(t.oBasicProfile)),t.validationController.addValidationCtx(t.basicProfileForm,t.commonService.getValidationRules("profile"))},function(o){e.prototype.hideLoader.call(t),new Error(o)})},t.prototype.getCountryWithBasicProfile=function(){var e=this,t={};t.type="country",this.oSigninService.getProfileMasterData(s,a.WidgetConfig.v1.ddoKeyMasterData,t).then(function(t){if("success"==t.status)if(t&&t.data&&t.data.country){e.getBasicProfile();for(var o=t.data.country,i=0;i<o.length;i++)e._countriesData.push(o[i].displayName)}else e.showError("E202");else e.showError("E202")})},t.prototype.getCanTrackIdValue=function(){var e=this.localStorage.getItem("ph$$diug"),t=null;return e&&(t=e.guid),t},t.prototype.focustoerror=function(){var e=this;setTimeout(function(){var t=document.querySelector('[class^="alert-form-message"]');t?(t.scrollIntoView(),t.querySelector("button")&&t.querySelector("button").focus()):e.focustoerror()},10)},t.prototype.saveProfile=function(){var t=this;if(this.basicProfileForm.country,this.duplicateCallControl(!1),this.validationController.hasErrors()){var o=phApp.validationRules||{orderOfProps:[]},i=o.orderOfProps,r=this.validationController.validationErrors;if(this._errorMessages.createprofile=[],i){for(var n=0;n<i.length;n++){var c=i[n],l=r[c];l&&l.length&&this._errorMessages.createprofile.push(l)}this._errorMessages.createprofile=this._errorMessages.createprofile.filter(function(e){return e})}return this.showError("E999"),this.focustoerror(),void this.duplicateCallControl(!0)}this.showErrorMsg=!1,this._errorMessages.createprofile=[],e.prototype.unhideLoader.call(this);var d=this.getCanTrackIdValue();this.basicProfileForm.guid=d,this.oSigninService.makeDDORequest(s,a.WidgetConfig.v1.ddoKeyCreateProfile,this.basicProfileForm).then(function(o){if(o)if(o.statusCode)t.showError("E4444"),t.authReminder=o.message,e.prototype.hideLoader.call(t),t.duplicateCallControl(!0);else{var i=o&&o.redirectUri;i?t.handlePageRedirectOnProfileCreate(i):(e.prototype.hideLoader.call(t),t.showError(),t.duplicateCallControl(!0))}},function(o){e.prototype.hideLoader.call(t),new Error(o),t.duplicateCallControl(!0)})},t.prototype.duplicateCallControl=function(e){var t=document.querySelector("#create_profile_btn");t&&(e?(t.style.pointerEvents="",t.classList.remove("disable")):(t.style.pointerEvents="none",t.classList.add("disable")))},t.prototype.handlePageRedirectOnProfileCreate=function(e){this.localStorage.removeItem("ph$$diug"),this.getCanTrackIdValue()?this.handlePageRedirectOnProfileCreate(e):window.location=this.baseDomain+e},t.prototype.showError=function(e){this.showErrorMsg=!0,this.errorCode=e||"E202"},t.prototype.closeError=function(e){this.showErrorMsg=!1,this.errorCode=""},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isSiteLogin",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"countryComplaince",void 0),t=__decorate([o.customElement(s),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,"function"==typeof(d=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&d||Object,r.OauthsigninService,"function"==typeof(h=void 0!==i.CookieManager&&i.CookieManager)&&h||Object,n.EventAggregator,"function"==typeof(p=void 0!==i.ValidationController&&i.ValidationController)&&p||Object])],t);var l,d,h,p}(i.PhenomWidget);t.Oauthsignin=l}),define("text!v1/ph-oauthsignin.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("text!v1/views/ph-oauthsignin-v1/create-profile/view.html",["module"],function(e){e.exports='<template> \r\n <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\r\n                        <div class="profile-section">\r\n                            \x3c!-- Basic view --\x3e\r\n                                <div class="form-section-main">\r\n                                    <div class="your-profile-section">\r\n                                        <div class="your-profile-heading">\r\n                                            <h2>Create Profile</h2>\r\n                                        </div>\r\n                                        <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\r\n                                        <form name="basicProfileForm" id="basicProfileForm" class="${showLoader ? \'disabled\' : \'\'}">\r\n                                            \x3c!--incomplete profile --\x3e\r\n                                            <div class="alert-form-message" if.bind="showErrorMsg && errorCode == \'E4444\'">\r\n                                                <div class="error-title">\r\n                                                    <p>${authReminder}</p>\r\n                                                </div>\r\n                                             </div>\r\n                                            \r\n                                            \r\n                                             \x3c!--unknown warning message--\x3e\r\n                                                <div class="alert-form-message" if.bind="showErrorMsg && errorCode == \'E202\'">\r\n                                                    \x3c!--<i class="icon icon-cancel  close"></i>--\x3e\r\n                                                    <div class="error-title">\r\n                                                    <ppc-content>Oops! An error occurred. Please try again</ppc-content></div>\r\n                                                </div>\r\n                                            <div class="your-form-group">\r\n                                                <div class="form-group">\r\n                                                    <label for="firstName">\r\n                                                    <ppc-content>\r\n                                                       First name\r\n                                                        <span class="required-text">\r\n                                                            <ppc-content key="literal-1487861327703-39">\r\n                                                                (required)\r\n                                                            </ppc-content>\r\n                                                        </span>\r\n                                                    </ppc-content>\r\n                                                    </label>\r\n                                                    <input type="text" id="firstName" name="firstName" value.bind="basicProfileForm.firstName & phValidate" data-rule-required="true"  aria-label="Enter first name">\r\n                                                    <span class="error-active" repeat.for="error of validationController.validationErrors.firstName">\r\n                                                        ${error | pht}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <div class="form-group">\r\n                                                    <label for="lastName">\r\n                                                    <ppc-content>\r\n                                                       Last name\r\n                                                        <span class="required-text">\r\n                                                            <ppc-content key="literal-1487861327703-39">\r\n                                                                (required)\r\n                                                            </ppc-content>\r\n                                                        </span>\r\n                                                    </ppc-content>\r\n                                                    </label>\r\n                                                 \r\n                                                    <input type="text" id="lastName" name="lastName" value.bind="basicProfileForm.lastName & phValidate" data-rule-required="true" aria-label="Enter last name">\r\n                                                    <span class="error-active" repeat.for="error of validationController.validationErrors.lastName">\r\n                                                        ${error | pht}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <div class="form-group">\r\n                                                    <label for="emailAddress">Email Address</label>\r\n                                                    <input type="email" id="emailAddress" name="emailAddress" value.bind="basicProfileForm.email" aria-disabled="true" disabled="disabled">\r\n                                                </div>\r\n                                            </div>\r\n                                            \x3c!--your form group --\x3e\r\n                                            \x3c!--actin buttons--\x3e\r\n                                            <div class="action-btns">\r\n                                                <a ph-href="${pageName}" class="btn btn-link" title="Cancel">Cancel</a>\r\n                                                <button type="submit" class="btn primary-button" click.delegate="saveProfile()" title="Create">Create</button>\r\n                                            </div>\r\n                                        </form>\r\n                                    </div>\r\n                                </div>\r\n                            \x3c!--Basic view end--\x3e\r\n                        </div>\r\n</template>'}),define("text!v1/views/ph-oauthsignin-v1/get-personalized/view.html",["module"],function(e){e.exports='<template>\r\n<div class="phs-get-personalized-area">\r\n    <div class="widget-container">    \r\n        \x3c!--Sign in block--\x3e\r\n        <div class="signin-block" if.bind="user.isLoggedIn === false">\r\n            <div class="gp-info">\r\n                <h4 class="gp-title">\r\n                    <ppc-content key="literal-1486829152746-37">\r\n                        Get personalized job recommendations\r\n                    </ppc-content>\r\n                </h4>\r\n                <p class="gp-description">\r\n                    <ppc-content key="literal-1486829152746-38">\r\n                        Sign in or create a profile and we\'ll let you know when there\'s a match.\r\n                    </ppc-content>\r\n                </p>\r\n            </div>\r\n            <div class="btn-group">\r\n                <a  href="javascript:void(0)" click.delegate="handlePagePath($event, \'login\')" class="btn primary-button" title="Sign in">\r\n                    <ppc-content key="literal-1486829152746-39">\r\n                        Sign in \r\n                        <ppc-content type="icon">\r\n                                    <i class="icon icon-arrow-right" aria-hidden="true"></i>\r\n                        </ppc-content>\r\n                    </ppc-content>\r\n                </a>\r\n                <a ph-href="createprofile" class="btn" title="Create profile">\r\n                        Create profile\r\n                        <ppc-content type="icon">\r\n                                <i class="icon icon-arrow-right" aria-hidden="true"></i>\r\n                        </ppc-content>\r\n                </a>\r\n            </div>\r\n        </div>\r\n        \x3c!--End Sign in block--\x3e\r\n        \x3c!--Update Profile block--\x3e\r\n        <div class="update-block" if.bind="user.isLoggedIn === true && showUpdateProfile === true">\r\n            <div class="gp-info">\r\n                <h4 class="gp-title">\r\n\r\n                    <ppc-content key="literal-1486829152746-40">\r\n                        Get personalized job recommendations\r\n                    </ppc-content>\r\n                </h4>\r\n                <p class="gp-description">\r\n                    <ppc-content key="literal-1486829152747-41">\r\n                        Update a profile get personalized job recommendations.\r\n                    </ppc-content>\r\n                </p>\r\n            </div>\r\n            <div class="btn-group">\r\n                <ppc-content type="link">\r\n                    <a ph-href="profile" class="btn" title="Update profile">\r\n                        Update profile\r\n                        <ppc-content type="icon">\r\n                            <i class="icon icon-arrow-right" aria-hidden="true"></i>\r\n                        </ppc-content>\r\n                    </a>\r\n                </ppc-content>\r\n            </div>\r\n        </div>\r\n        \x3c!--End Update Profile block--\x3e\r\n    </div>\r\n    \x3c!--End Personalized job recommendations--\x3e\r\n</div>\r\n</template>'}),define("text!v1/views/ph-oauthsignin-v1/my-profile/view.html",["module"],function(e){e.exports='<template>\r\n    <a role="button" tabindex="3" href="javascript:void(0)" class="nav-arrow-right show-arrow" onclick="showRight()">\r\n        <i class="icon icon-arrow-right" aria-hidden="true"></i>\r\n    </a>\r\n    <span if.bind="user.isLoggedIn === false">\r\n        <button role="button" tabindex="3" id="profile" onfocus="onfocusAnchor(this);myFocusFunction();" ph-tevent="signIn_click" click.delegate="handlePagePath($event, \'login\')" aria-label="Sign in" class="btn primary-button" key-aria-label="signInLinkTitle">\r\n            <ppc-content key="headerSignInLinkText">Sign in</ppc-content>\r\n        </button>\r\n    </span>\r\n    <span class="profile-container" if.bind="user.isLoggedIn === true">\r\n        <button role="button" onclick="openProfiledetails(this)" tabindex="3" aria-expanded="false" id="profile" aria-label="Hi, ${user.profile.firstName}!" key-aria-label="hiCandidateInfoText" class="btn primary-button profile-title" onfocus="closeTitle(this)">\r\n            <span class="hiLabel"><ppc-content key="headerxboxLinkText">Hi</ppc-content></span><span class="userName" if.bind="user.profile.firstName">, ${user.profile.firstName}!</span><i class="icon icon-down-arrow header-arrow" aria-hidden="true"></i>\r\n        </button>\r\n        <ul class="menupanel" aria-labelledby="profile" id="candidate-details">\r\n            <li>\r\n                <a tabindex="3" ph-tevent="header_menu_click" data-ph-tevent-attr-trait62="Profile" class="menu-item secondheader-nav" role="link" ph-href="profile" aria-label="Profile" key-aria-label="profileLinkText"><ppc-content key="headerProfileLinkText">Profile</ppc-content></a>\r\n            </li>\r\n            <li>\r\n                <a tabindex="3" ph-tevent="header_menu_click" data-ph-tevent-attr-trait62="Action center" class="menu-item secondheader-nav" role="link" ph-href="actioncenter" aria-label="Action center" key-aria-label="actioncenterLinktext"><ppc-content key="headerActionCenterLinkText">Action center</ppc-content></a>\r\n            </li>\r\n            <li>\r\n                <a tabindex="3" ph-tevent="logout_click" ph-href="logout?qpage=%2Fus%2Fen%2F&page=home" aria-label="Sign out from Microsoft careers" role="link" key-aria-label="signOutLinktext">\r\n                    <span class="action-content-title"><ppc-content key="headerSignOutLinkText">Sign out</ppc-content></span>\r\n                </a>                                \r\n            </li>\r\n        </ul>                                                                          \r\n    </span>\r\n</template>'}),
define("text!v1/views/ph-oauthsignin-v1/import-linkedin/view.html",["module"],function(e){e.exports='<template>\r\n <div class="ph-oauthsigin-area ph-widget-box">\r\n    <a ph-tevent="update_profile_click" data-ph-tevent-attr-trait27="${profileForm.email}" data-ph-tevent-attr-trait260="linkedin_profile" href="javascript:void(0)" click.delegate="dologin(providerKey.LINKEDIN, true)" title="Import from LinkedIn" role="button" key-role="button" key-title="importFromLinkedIn">\r\n        <div class="icon-box linkedin-icon" aria-hidden="true">\r\n            <img src="../assets/images/linkedin.png">\r\n        </div>\r\n        <div class="text-box">\r\n            <ppc-content key="importFromLinkedInText">Import from LinkedIn</ppc-content>\r\n        </div>\r\n    </a>\r\n    </div>\r\n</template>\r\n'}),define("text!v1/views/ph-oauthsignin-v1/default/view.html",["module"],function(e){e.exports='<template>\r\n<div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\r\n<div class="login-area ${showLoader ? \'hidden\' : \'\'}">\r\n    <h1 class="login-title" role="heading" aria-label="Sign in">\r\n        <ppc-content key="login-heading">\r\n            Sign in\r\n        </ppc-content>\r\n    </h1>\r\n    <div class="personal-login">\r\n\r\n        <h4 class="login-heading" role="heading" aria-label="Personal">\r\n            <ppc-content key="login-subheading-personal">\r\n                Personal\r\n            </ppc-content>\r\n        </h4>\r\n        <p class="login-description" role="contentinfo" aria-label="Sign in with your personal account.">\r\n            <ppc-content key="login-subheading-personal-text">\r\n                Sign in with your personal account.\r\n            </ppc-content>\r\n        </p>\r\n\r\n        <ul class="login-category-list">\r\n\r\n            <li class="login-category-item">\r\n                <a href="javascript:void(0)" click.delegate="dologin(providerKey.MICROSOFT)" role="button" title="Sign in with Microsoft" ph-tevent="external_account_login" data-ph-tevent-attr-trait213="microsoft">\r\n                    <div class="icon-box microsoft-icon">\r\n                        <ppc-content type="icon">\r\n\r\n                        </ppc-content>\r\n                    </div>\r\n                    <div class="text-box" key="login-signinwith-microsoft">\r\n                        Sign in with Microsoft\r\n                    </div>\r\n                </a>\r\n            </li>\r\n\r\n\r\n            <li class="login-category-item">\r\n                <a href="javascript:void(0)" click.delegate="dologin(providerKey.LINKEDIN)" title="Sign in with LinkedIn" role="button" ph-tevent="external_account_login" data-ph-tevent-attr-trait213="linkedin">\r\n                    <div class="icon-box linkedin-icon">\r\n                        <ppc-content type="icon">\r\n\r\n                        </ppc-content>\r\n                    </div>\r\n                    <div class="text-box" key="login-signinwith-linkedin">\r\n                        Sign in with LinkedIn\r\n                    </div>\r\n                </a>\r\n            </li>\r\n\r\n\r\n            <li class="login-category-item">\r\n                <a href="javascript:void(0)" click.delegate="dologin(providerKey.FACEBOOK)" title="Sign in with Facebook" role="button" ph-tevent="external_account_login" data-ph-tevent-attr-trait213="facebook">\r\n                    <div class="icon-box facebook-icon">\r\n                        <ppc-content type="icon">\r\n\r\n                        </ppc-content>\r\n                    </div>\r\n                    <div class="text-box" key="login-signinwith-facebook">\r\n                        Sign in with Facebook\r\n                    </div>\r\n                </a>\r\n            </li>\r\n\r\n\r\n            <li class="login-category-item">\r\n                <a href="javascript:void(0)" click.delegate="dologin(providerKey.GOOGLE)" title="Sign in with Google" role="button" ph-tevent="external_account_login" data-ph-tevent-attr-trait213="google">\r\n                    <div class="icon-box google-icon">\r\n                        <ppc-content type="icon">\r\n\r\n                        </ppc-content>\r\n                    </div>\r\n                    <div class="text-box" key="login-signinwith-google">\r\n                        Sign in with Google\r\n                    </div>\r\n                </a>\r\n            </li>\r\n\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="corporate-login">\r\n\r\n        <h4 class="login-heading">\r\n            <ppc-content key="login-subheading-corporate" aria-label="Corporate" role="heading">\r\n                Corporate\r\n            </ppc-content>\r\n        </h4>\r\n        <p class="login-description">\r\n            <ppc-content key="login-subheading-corporate-text" aria-label="Sign in with your corporate account." role="contentinfo">\r\n                Sign in with your corporate account.\r\n            </ppc-content>\r\n        </p>\r\n\r\n        <ul class="login-category-list">\r\n\r\n            <li class="login-category-item">\r\n                <a href="javascript:void(0)" click.delegate="dologin(providerKey.MICROSOFTCORPORATE)" title="Microsoft corporate sign in" role="button" ph-tevent="internal_account_login" data-ph-tevent-attr-trait213="microsoft">\r\n                    <div class="icon-box microsoft-icon">\r\n                        <ppc-content type="icon">\r\n\r\n                        </ppc-content>\r\n                    </div>\r\n                    <div class="text-box" key="login-signinwith-corporate-microsoft">\r\n                        Microsoft corporate sign in\r\n                    </div>\r\n                </a>\r\n            </li>\r\n\r\n\r\n            <li class="login-category-item">\r\n                <a href="javascript:void(0)" click.delegate="dologin(providerKey.LINKEDINCORPORATE)" title="LinkedIn corporate sign in" role="button" ph-tevent="internal_account_login" data-ph-tevent-attr-trait213="linkedin">\r\n                    <div class="icon-box linkedin-icon ">\r\n                        <ppc-content type="icon ">\r\n\r\n                        </ppc-content>\r\n                    </div>\r\n                    <div class="text-box" key="login-signinwith-corporate-linkedin">\r\n                        LinkedIn corporate sign in\r\n                    </div>\r\n                </a>\r\n            </li>\r\n\r\n        </ul>\r\n\r\n    </div>\r\n</div>\r\n</template>\r\n'}),define("text!v1/views/ph-oauthsignin-v1/sign-out/view.html",["module"],function(e){e.exports='<template>\r\n    <a if.bind="user.isLoggedIn === true" href="javascript:void(0)" click.delegate="handleSignout($event)" key-title="signOutLabel" title="Sign Out" aria-label="Sign Out" key-aria-label="signOutLabel" role="link" key-role="linkRole">\r\n        <ppc-content type="icon"><i class="msicon-fullmdl2assets-30 sign-out-icon" aria-hidden="true"></i></ppc-content>\r\n        <span class="action-content-title" key="signOutTxt">Sign out</span>\r\n    </a>\r\n</template>'}),define("text!v1/views/ph-oauthsignin-v1/socialsso/view.html",["module"],function(e){e.exports="<template>\r\n    \x3c!--empty view required for social sso--\x3e\r\n</template>"}),define("text!v1/views/ph-oauthsignin-v1/view1/view.html",["module"],function(e){e.exports='<template>\r\n    <div class="ph-oauthsigin-area ph-widget-box" if.bind="user.isLoggedIn === false">\r\n        <p>\r\n            <ppc-content key="literal-136">Get personalized job recommendations. Login with</ppc-content>\r\n            <a ph-tevent="linkedin_login_click" click.delegate="dologin(providerKey.LINKEDIN)" href="javascript:void(0)" title="LinkedIn">\r\n                LinkedIn.\r\n            </a>\r\n        </p>\r\n    </div>\r\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-global-search-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"globalSearchV3",ddoKeyEvent:"globalSearchEventV3",landingpageddoKey:"getBusinessRules",ddoKeyMOSSEARCH:"globalSearchMOSTitles",ddoKeyGlobalSearchConfig:"globalSearchConfig",ddoKeyAgp:"getAgpMetaData",ddoKeyEagerLoad:"eagerLoadRefineSearch"}},t.globalSearchConfig={globalSearchFeature:{mobileSearch:!0,militarySearch:!1,mobileSearchWithHeaderIcon:!1}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-global-search-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e,this.params={}}return e.prototype.getSearchResults=function(e,t,o){var i=this.params;return o&&o.searchValue&&(delete i.field,delete i.sub_field,i.keywords=o.searchValue,i.category="category",i.location="location"),o&&o.condition&&o.condition.length&&(i.condition=o.condition),"globalSearchV3"==t&&(i.field="category",i.sub_field="internalCategoryId",i.location_size=2,i.category_size=2,i.job_size=3),this.commonService.getDDO(e,t,i).then(function(e){var o=e[t];if(o.jobLocations&&o.jobLocations.locations){var i=o.jobLocations.locations,a={};for(var r in i){var n=[];if(i.hasOwnProperty(r)){var s=i[r];for(var c in s){var l=s[c];l.location=l.name,l.field=r,n.push(l)}}a[r]=n}o[t]={locations:a}}return o})},e.prototype.getLandingpageKey=function(e,t,o){return void 0===o&&(o={}),this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getMOSSearchResults=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.makeDDOrequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.GlobalSearchService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-global-search",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-global-search-config","./ph-global-search-service"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=".ph-header-search-icon",c=".ph-a11y-search-box, input",l=["allCategories","suggestedJobs","suggestedLocations","suggestedCategories","suggestedRecentSearches","suggestedKeywords"],d=function(e){function t(t,o,i,a,r,n){var c=e.call(this,t,o,d.elementTag)||this;return c.element=t,c.commonService=o,c.globalSearchService=i,c.eventAggregator=a,c.localStorage=r,c.WidgetConfig=n,c.placeholderText="Enter job title",c.showTitle=!0,c.showCaption=!0,c.searchValue="",c.arrowNavigation=!0,c.mosVisibleCategories=!1,c.isEmptyredirection=!1,c.reloadOnClear=!1,c.checkValidation=!1,c.searchUrl="search-results",c.isLandingPage=0,c.categoryColumnCount=2,c.inlineSearch=!0,c.preFillSearchedKey=!0,c.showDropDown=!1,c.showAllJobCategories=!0,c.showJobSuggestions=!0,c.showRecentSearches=!0,c.isDisabled=!0,c.recentlySearchedKeys=c.localStorage.getItem("globalSearch"),c.recentSearchStorage=[],c.itemSBHasFocus=!1,c.isEnterClick=!0,c.keywordsSearched=[],c.suggestedJobResults=[],c.suggestedJobResultsNames=[],c.suggestedMOSKeywords=[],c.gsFeature={},c.isMobileEnabled=!1,c.isMilitarySearch=!1,c.isMOSSearchEnabled=!0,c.isMOSClick=!1,c.mosCode="",c.showError=!1,c.isClearsearch=!1,c.suggestedKeywords=[],c.copyMOSKeywords=[],c.gsClrTxt=0,c.isSearchInFocus=!1,c.subscriptions=[],c.resultsUpdated=!1,c.searchBoxBackdrop=!1,c.isHeadSearchEnabled=!1,c.enableSuggestionResults=[],c.agpData={},c.avoidInitialValueChanged=!1,c.allSuggestions=c.getAllJobSuggestions(),c.handleInputFocus=function(e){if(c.element.firstElementChild.classList.contains("ph-mobile-search-backdrop")){c.element.firstElementChild.classList.add("ph-mobile-search-enabled");var t=e&&e.target&&e.target.closest(".ph-search-group"),o=c.element.querySelector(".form-group");if(t&&o&&c.isMobileEnabled&&(o.classList.contains("ph-mobile-search")||o.classList.add("ph-mobile-search"),t.classList.contains("ph-mobile-search")||t.classList.add("ph-mobile-search")),document.body.scrollTop=0,document.body.style.overflow="hidden",c.element.querySelector(s)&&c.gsFeature.mobileSearchWithHeaderIcon){c.isHeadSearchEnabled=!0;var i=c.element.querySelector("input.ph-input-search");i&&i.focus()}}},c}return __extends(t,e),d=t,t.prototype.getAllJobSuggestions=function(){this.showDropDown=!1;var e=this.isFull;return{show:null,updateShow:function(){var t={jobs:e(this.jobs),locations:e(this.locations),categories:e(this.categories),keywords:e(this.keywords),searched:e(this.searched),all:!1};for(var o in t)if(t.hasOwnProperty(o)&&1==t[o]){t.all=!0;break}return t},jobs:null,locations:null,categories:null,keywords:null,searched:null,boundaries:null}},t.prototype.created=function(){this.showDropDown=!1,this.fetchResultsConfig()},t.prototype.attached=function(){var t=this;if(e.prototype.attached.call(this),!this.hasFeature&&!this.hasFeature("auto-complete","a11y")){var o=this.handleActionOutsideScope.bind(this);document.addEventListener("mouseup",o,!1),document.addEventListener("keyup",this.keyUpCallback.bind(this),!1)}if(this.isMilitarySearch=!(!this.element||!this.element.getAttribute("ph-mos-search")),this.gsFeature=this.commonService.getSiteSettings("globalSearchFeature")||{},this.isMOSSearchEnabled=this.isMilitarySearch||this.gsFeature.militarySearch,this.isDisabled=!!this.isMilitarySearch||this.checkValidation,this.preFillSearchedKey&&(this.searchValue=e.prototype.getSearchKeyword.call(this)||""),this.isLandingPage&&(this.rk=this.rk?this.rk:this.commonService.phenomAppManager.getSessionParams("rk"),this.rk&&this.rk.length>0)){var i={},a={};return a.landingPageKeys=[this.rk],i.pageIdentifier=a,this.globalSearchService.getLandingpageKey(d.elementTag,r.WidgetConfig[d.version].landingpageddoKey,i).then(function(e){e&&e.data&&e.data[t.rk]&&(t.condition=e.data[t.rk].condition)})}var n=this.commonService.getSiteSettings("globalSearchFeature");n&&Object.keys(n).length&&n.mobileSearch&&setTimeout(function(){window.addEventListener("resize",function(){t.eventAggregator.publish("globalsearchv3resize",{})}),t.handleSearchOnWindowResize()},500),this.subscriptions.push(this.eventAggregator.subscribe("globalsearchv3resize",function(e){t.handleSearchOnWindowResize()})),setTimeout(function(){var e=t.element.querySelector(c);e&&e.addEventListener("focus",function(){t.searchBoxBackdrop=!0})},100),this.fetchAgpFilterBasedJobs()},t.prototype.fetchAgpFilterBasedJobs=function(){var e=this.commonService.getCachedDDO(r.WidgetConfig[d.version][d.ddoKeyAgp]),t=this.commonService.getCachedDDO(r.WidgetConfig[d.version][d.ddoKeyEagerLoad]);if(e&&e.data&&e.data.lpKeyData&&t){this.agpData={totalHits:t.totalHits,bannerText:e.data.lpKeyData.bannerText};var o=window.location.pathname;o&&(this.searchUrl=o.replace("/",""))}},t.prototype.fetchResultsConfig=function(){var e=this;this.globalSearchService.makeDDOrequest(d.elementTag,r.WidgetConfig[d.version][d.ddoKeyGlobalSearchConfig],{}).then(function(t){t&&t.data&&t.data.configured?e.enableSuggestionResults=t.data.data||[]:e.enableSuggestionResults=l},function(t){e.enableSuggestionResults=l,new Error(t)})},t.prototype.isSuggestionVisible=function(e){return-1==this.enableSuggestionResults.indexOf(e)},t.prototype.handleSearchOnWindowResize=function(){var e=document.querySelector(s),t=window.innerWidth;if(e&&this.gsFeature&&this.gsFeature.mobileSearch&&this.gsFeature.mobileSearchWithHeaderIcon)this.isMobileEnabled=!0,t<=767?e.addEventListener("click",this.handleInputFocus):(this.isMobileEnabled=!1,e.removeEventListener("click",this.handleInputFocus),this.clearBackdrop());else if(t<=767){this.isMobileEnabled=!0;for(var o=this.element.querySelectorAll("input.ph-input-search")||[],i=0;i<o.length;i++)o[i].addEventListener("focusin",this.handleInputFocus)}else{this.isMobileEnabled=!1;for(var o=this.element.querySelectorAll("input.ph-input-search")||[],i=0;i<o.length;i++)o[i].removeEventListener("focusin",this.handleInputFocus);this.clearBackdrop()}},t.prototype.handleSelection=function(e){if(this.inlineSearch)for(var t=e.target;t!=this;){if("A"==t.nodeName){var o=t.getAttribute("data-option-title");return void(o?this.searchValue=o:console.warn("value not found"))}t=t.parentNode}},t.prototype.handleActionOutsideScope=function(e){var t=e.target;if(13===e.keyCode||void 0==e.keyCode){for(var o=!0,i=void 0;t;)if(t=t.parentElement,i=t&&t.className){if(null==t||-1==i.indexOf("phs-global-search"))o=!0;else if(i.indexOf("phs-global-search")>=0){o=!1;break}}else t||(o=!0);o&&this.handleBlur()}else 27!=e.keyCode&&9!=e.keyCode||this.handleBlur()},t.prototype.handleBlur=function(){this.showDropDown=this.showAllJobCategories=this.showJobSuggestions=!1},t.prototype.handleSuggestedKeysArrowKeysData=function(){function e(){return t=document.querySelectorAll(".phs-keyword-suggestions li a"),o=t.length-1,i>=o?i=o:i<0&&(i=0),t[i]}var t,o,i=-1;return{next:function(){return i+=1,e()},prev:function(){return i-=1,e()}}},t.prototype.handleCategoryArrowKeysData=function(){function e(e){a=0==e&&0==a?n:0,i=o==i+1?0:i+1,n=t[i]?t[i].length-1:n}var t=this.allJobCategories,o=t.length,i=0,a=-1,r=1,n=t[i].length-1;return{next:function(){return r=1,a==n?e(r):a++,{column:i,delta:a}},prev:function(){return r=0,0==a?e(r):a--,{column:i,delta:a}},reset:function(){a=r?a-1:a+1}}},t.prototype.searchValueChanged=function(t){var o=e.prototype.getSearchKeyword.call(this);if(this.preFillSearchedKey&&!this.avoidInitialValueChanged&&this.searchValue==o)return void(this.avoidInitialValueChanged=!0);var i=this,a=i.searchValue||"",r=a&&a.length>0;r&&(i.showDropDown=!0),i.showDropDown&&(r?(i.showAllJobCategories||i.showJobSuggestions)&&(this.isMilitarySearch?(this.fetchMilitaryJobSuggestions(),this.mosVisibleCategories&&i.fetchJobSuggestions()):i.fetchJobSuggestions()):i.fetchJobCategories()),i.isDisabled=!r},t.prototype.handleCategoryOptions=function(e,t){var o,i;switch(e.keyCode){case 37:case 39:break;case 38:this.arrowNavigation&&(i=t.prev(),(o=document.querySelector("#phs-lia_"+i.column+"_"+i.delta))&&o.focus());break;case 40:this.arrowNavigation&&(i=t.next(),(o=document.querySelector("#phs-lia_"+i.column+"_"+i.delta))&&o.focus())}},t.prototype.handleSuggestedKeyOptions=function(e,t){var o;switch(e.keyCode){case 38:this.arrowNavigation&&(o=t.prev())&&o.focus();break;case 40:this.arrowNavigation&&(o=t.next())&&o.focus()}},t.prototype.keyUpCallback=function(e){if(9===e.keyCode){var t=document.querySelectorAll(".ph-suggestion-focus-block");if(t.length)for(var o=0,i=t;o<i.length;o++){var a=i[o],r=a&&a.contains(document.activeElement);r?this.itemSBHasFocus=!0:(this.handleBlur(),this.itemSBHasFocus=!1)}}if(27===e.keyCode)return this.handleBlur(),!0},t.prototype.arrowKeyUp=function(e){var t=null;if(13!==e.keyCode||!1!==this.itemSBHasFocus||this.isClearsearch)1==this.showJobSuggestions?(t=this.allSuggestions.boundaries,this.handleSuggestedKeyOptions(e,t)):1==this.showAllJobCategories&&(t=this.allJobCategories.boundaries,this.handleCategoryOptions(e,t));else{var o=e.target&&e.target.href||"";""===o&&this.handleSubmitClick(o)}},t.prototype.handleItemFocus=function(e){switch(e.type){case"focus":console.info("hello")}},t.prototype.clearBackdrop=function(e){var t=this.element.querySelectorAll(".ph-search-group"),o=this.element.querySelector(".form-group"),i=this.element.querySelector(".ph-mobile-search-enabled");if(t&&o&&i){i.classList.remove("ph-mobile-search-enabled"),o.classList.contains("ph-mobile-search")&&o.classList.remove("ph-mobile-search");for(var a=0;a<t.length;a++)t[a].classList.contains("ph-mobile-search")&&t[a].classList.remove("ph-mobile-search");if(this.showDropDown=!1,document.body.style.overflow="",e&&e.target){var r=document.querySelector(s),n=this.element.querySelector(".phs-search-submit");r&&this.gsFeature&&this.gsFeature.mobileSearch&&this.gsFeature.mobileSearchWithHeaderIcon?n=r:document.body.style.overflow="initial",n&&n.focus()}}},t.prototype.handleFocus=function(e){var t=this,o=t.searchValue||"";switch(e.type){case"focus":o.length>0?t.isMilitarySearch?t.fetchMilitaryJobSuggestions():t.fetchJobSuggestions():t.isMilitarySearch?this.mosVisibleCategories&&t.isMilitarySearch&&t.fetchJobCategories():t.fetchJobCategories()}var i=document.querySelector("#searchSuggest").classList;i.contains("hide")&&(i.remove("hide"),i.add("show"))},t.prototype.isFull=function(e){return null!=e&&"object"==typeof e&&Object.keys(e).length>0},t.prototype.clearSearch=function(e){var t=this;if(this.isClearsearch=!0,setTimeout(function(){t.isClearsearch=!1},200),this.reloadOnClear){var o=window.location.origin+window.location.pathname;window.location.assign(o)}else e.preventDefault(),this.isDisabled=!0,this.showDropDown=!1,this.searchValue="",this.gsClrTxt=1,this.element.querySelector(c)&&(this.element.querySelector(c).focus(),setTimeout(function(){t.searchBoxBackdrop=!0},100))},t.prototype.isEmpty=function(e){return!e||0==e.length},t.prototype.fetchJobSuggestions=function(){var e=this,t={},o=this.allSuggestions;t.searchValue=this.searchValue,this.condition&&this.condition.length>0&&(t.condition=this.condition);var i=this.fetchMilitaryJobSuggestions(!0),a=this.globalSearchService.getSearchResults(d.elementTag,r.WidgetConfig[d.version][d.ddoKeyEvent],t).then(function(t){if(e.suggestedJobs=t.jobTitles.data.titles,e.suggestedKeywords=t.jobTitles.data.suggestions||[],o.keywords=e.suggestedKeywords,e.suggestedJobs){for(var i=0;i<e.suggestedJobs.length;i++){var a=e.suggestedJobs[i].title.replace(/<em>/g,"");a=a.replace(/<\/em>/g,"")}o.jobs=e.suggestedJobs}if(t.jobLocations&&t.jobLocations.locations){if(e.suggestedLocations=[],t.jobLocations.locations.city)for(var r=0;r<t.jobLocations.locations.city.length;r++)e.suggestedLocations.push(t.jobLocations.locations.city[r]);if(t.jobLocations.locations.country)for(var r=0;r<t.jobLocations.locations.country.length;r++)e.suggestedLocations.push(t.jobLocations.locations.country[r]);if(t.jobLocations.locations.state)for(var r=0;r<t.jobLocations.locations.state.length;r++)e.suggestedLocations.push(t.jobLocations.locations.state[r]);o.locations=t.jobLocations.locations}if(e.suggestedCategories=t.jobCategories.data.agg,e.suggestedCategories){for(var r=0;r<e.suggestedCategories.length;r++)e.suggestedCategories[r].key=e.suggestedCategories[r].category;o.categories=e.suggestedCategories}return e.populateRecentSearches(),document.activeElement===e.element.querySelector(c)&&(e.showDropDown=!0),e.showAllJobCategories=!1,e.showJobSuggestions=!0,o.show=o.updateShow(),e.isEmpty(e.suggestedJobs)&&e.isEmpty(e.suggestedLocations)&&e.isEmpty(e.suggestedCategories)&&!(e.keywordsSearched&&e.keywordsSearched.length>0)&&e.isEmpty(e.suggestedKeywords)||(e.element.querySelector(".job-filter"),e.element.querySelector(".phs-keywords"),e.element.querySelectorAll(".phs-keyword-suggestions li")),e.suggestedJobResults=[],e.suggestedJobResultsNames.length&&e.suggestedJobResultsNames.map(function(t){e.suggestedJobResults="keywordsSearched"==t?e.suggestedJobResults.concat(e[t].slice(0,3)):e.suggestedJobResults.concat(e[t])}),e.allSuggestions.searched&&(e.suggestedJobResults=e.suggestedJobResults.concat(e.allSuggestions.searched.slice(0,3))),e.suggestedJobResults},function(e){new Error(e)});return Promise.all([a,i]).then(function(t){return e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),t[0].concat(t[1])})},t.prototype.setMOSKeyword=function(e,t){this.setMOSKeywordValue(e,t),t&&"click"==t.type&&this.handleSubmitClick()},t.prototype.setMOSKeywordValue=function(e,t){if(e){var o="";e.title&&(o=e.title),this.isDisabled=!1,this.searchValue=o.replace(/<(?:.|\n)*?>/gm,""),this.mosCode=e.mos_code}},t.prototype.setMOSFocusField=function(e){-1==e&&(e=0);var t=!1;if(!this.isMOSClick&&this.searchValue.length&&this.suggestedMOSKeywords&&this.suggestedMOSKeywords.length){this.showDropDown=!1;for(var o=0;o<this.suggestedMOSKeywords.length;o++)this.searchValue==this.suggestedMOSKeywords[o]&&(t=!0);t||(e=e||0==e?e:0,this.suggestedMOSKeywords[e]&&this.suggestedMOSKeywords[e].title&&this.suggestedMOSKeywords[e].title.length&&(this.searchValue=this.suggestedMOSKeywords[e].title),this.suggestedMOSKeywords[e]&&this.suggestedMOSKeywords[e].mos_code&&(this.mosCode=this.suggestedMOSKeywords[e].mos_code))}},t.prototype.fetchMilitaryJobSuggestions=function(e){var t=this;if(!this.isMOSSearchEnabled)return new Promise(function(e,t){e([])});"undefined"!=typeof event&&"object"==typeof event&&(this.focusedElement=event&&event.target),this.isMOSClick=!1;var o=(this.allSuggestions,{});return o.size=3,o.keywords=this.searchValue,this.isMilitarySearch&&(o.size=5),this.condition&&this.condition.length>0&&(o.condition=this.condition),this.globalSearchService.getMOSSearchResults(d.elementTag,r.WidgetConfig[d.version][d.ddoKeyMOSSEARCH],o).then(function(o){return o=o&&o.data||{},o&&o.results&&o.results.length?(t.suggestedMOSKeywords=o.results,t.isDisabled=!1):o.searchConfig&&(t.suggestedMOSKeywords=[],t.isDisabled=!0,t.isMOSSearchEnabled=o.searchConfig.isMOSSearchEnabled),document.activeElement===t.element.querySelector(c)&&(t.showDropDown=!0),e||(t.resultsUpdated=!0,setTimeout(function(){t.resultsUpdated=!1},1e3)),t.suggestedMOSKeywords})},t.prototype.fetchJobCategories=function(){var e=this,t={};return t.searchValue=this.searchValue,this.condition&&this.condition.length>0&&(t.condition=this.condition),this.globalSearchService.getSearchResults(d.elementTag,r.WidgetConfig[d.version][d.ddoKey],t).then(function(t){return t.data.category&&t.data.category.forEach(function(e){e.key||(e.key=e.category)}),document.activeElement===e.element.querySelector(c)&&(e.showDropDown=!0),e.populateRecentSearches(),e.allJobCategories=e.singleArrayChunk(t.data.category,e.categoryColumnCount),e.showAllJobCategories=!0,e.showJobSuggestions=!1,e.suggestedJobResults=[],e.keywordsSearched=e.keywordsSearched.slice(0,3),e.suggestedJobResults=e.suggestedJobResults.concat(t.data.category),e.resultsUpdated=!0,setTimeout(function(){e.resultsUpdated=!1},1e3),e.allJobCategories},function(e){new Error(e)})},t.prototype.onError=function(e){i.logger.debug("ph-global-search: error..."+e)},t.prototype.chunk=function(e,t){var o,i=[],a=t,r=Math.floor(e.length/a),n=e.length%a,s=0;for(n>0&&(r+=1);a;)o=1==a?e.length:s+r,i.push(e.slice(s,o)),s=o,a--;return i},t.prototype.handleSubmitClick=function(t,o){var a=this;if(o&&o.preventDefault(),this.isMilitarySearch){if(!this.suggestedMOSKeywords.length&&!this.isEmptyredirection)return;if(this.suggestedMOSKeywords.length){var r=!1;this.suggestedMOSKeywords.forEach(function(e){e.title==a.searchValue&&(!a.mosCode&&e.mos_code&&(a.mosCode=e.mos_code),r=!0)}),r||(this.searchValue=this.suggestedMOSKeywords[0].title,this.mosCode=this.suggestedMOSKeywords[0].mos_code)}}if(this.showError=!1,this.searchValue&&this.isEnterClick||!this.checkValidation){this.checkValidation=!1,this.isEnterClick=!1,this.mosCode||(this.updateLocalStrWithRecentSearchDetails(this.searchValue,!0),this.storeKeywordsForRecommendation());var n={};n.trait6=this.searchValue;try{this.commonService.processTrackingEvent("page_search",void 0,n)}catch(o){i.logger.debug(o.message)}var s=void 0,c="";if(this.mosCode&&(c="&ms=true&moscode="+this.mosCode),"search-results"==this.searchUrl)s=e.prototype.getUrl.call(this,null,this.searchUrl,{},"keywords="+this.searchValue+c);else{var l=-1==this.searchUrl.indexOf("?")?"?keywords=":"&keywords=";s=this.commonService.getBaseUrl()+this.searchUrl+l+this.searchValue+c}window.location.assign(s)}else this.showError=!0},t.prototype.updateLocalStorage=function(){var e=this.localStorage.getItem("globalSearch")||[];-1==e.indexOf(this.searchValue)&&(e.push(this.searchValue),this.localStorage.setItem("globalSearch",e)),this.recentSearchStorage=e},t.prototype.populateRecentSearches=function(){null!=this.commonService.getSpecificTrackCtx(d.globalSearchKeywords)?(this.allSuggestions.searched=this.commonService.getSpecificTrackCtx(d.globalSearchKeywords),this.showRecentSearches=!0):this.showRecentSearches=!1},t.prototype.getCategoryUrl=function(e){return"/us/en/c/"+e.toLowerCase()+"-jobs"},t.prototype.updateLocalStrWithRecentSearchDetails=function(e,t){if(!0===t||!1===this.inlineSearch){null!=e&&e.length>0&&(this.searchValue=e);var o=[];null!=this.commonService.getSpecificTrackCtx(d.globalSearchKeywords)&&(o=this.commonService.getSpecificTrackCtx(d.globalSearchKeywords)),this.searchValue&&this.searchValue.length&&(-1==o.indexOf(this.searchValue)?o.unshift(this.searchValue):(o.splice(o.indexOf(this.searchValue),1),o.unshift(this.searchValue)),this.commonService.setSpecificTrackCtx(d.globalSearchKeywords,o))}return!0},t.prototype.storeKeywordsForRecommendation=function(){var e=[];if(null!=this.commonService.getSpecificTrackCtx(d.searchKeywords)&&(e=this.commonService.getSpecificTrackCtx(d.searchKeywords)),this.searchValue&&this.searchValue.length){if(null!=e){for(var t in e)if(e[t].keyword==this.searchValue){e.splice(t,1);break}}else e=[];e.unshift({keyword:this.searchValue,timeStamp:(new Date).toUTCString()}),this.commonService.setSpecificTrackCtx(d.searchKeywords,e)}},t.prototype.detached=function(){if(this.element.firstElementChild&&this.element.firstElementChild.classList.contains("ph-mobile-search-backdrop")){window.removeEventListener("resize",this.handleSearchOnWindowResize);for(var e=this.element.querySelectorAll("input.ph-input-search"),t=0;t<e.length;t++)e[t].removeEventListener("focusin",this.handleInputFocus)}this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.getWidgetBundleValue=function(e,t,o){return this.widgetBundle&&this.widgetBundle[e]?this.widgetBundle[e]:o?o.getAttribute(t):void 0},t.prototype.singleArrayChunk=function(e,t){window.innerWidth<=767&&(t=1);for(var o=[],i=[],a=Math.floor(e.length/t),r=e.length%t,n=0;n<t;n++){for(var s=[],c=0;c<a;c++){var l=c+n*a;s.push(e[l])}r>=1&&(s.push(e[e.length-(n+1)]),r-=1),o.push(s)}if(o.length){for(var d=0;d<o[0].length;d++)for(var h=0;h<o.length;h++)o[h][d]&&i.push(o[h][d]);o=i}return o},t.prototype.setKeywordSuggested=function(e){this.suggestedJobResultsNames=e},t.prototype.getFieldOptions=function(e){var t=this;switch(e){case"typehead":return this.searchValue.length>0?this.isMilitarySearch?this.fetchMilitaryJobSuggestions():this.fetchJobSuggestions():(this.isSearchInFocus=!0,this.isMilitarySearch?(this.resultsUpdated=!0,setTimeout(function(){t.resultsUpdated=!1},1e3),[]):this.fetchJobCategories())}},t.prototype.setFieldValue=function(e,t){switch(e){case"typehead":if(this.searchValue.length){if(this.isMilitarySearch){
if(this.suggestedMOSKeywords.length&&this.suggestedMOSKeywords[t]){this.setMOSKeyword(this.suggestedMOSKeywords[t]),this.mosCode=this.suggestedMOSKeywords[t].mos_code,this.isMOSClick=!0;var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}else if(this.suggestedMOSKeywords.length&&-1==t){this.setMOSKeyword(this.suggestedMOSKeywords[0]),this.mosCode=this.suggestedMOSKeywords[0].mos_code,this.isMOSClick=!0;var o=this.element.querySelectorAll(".phs-suggested-mos-keywords-list li a");this.fireClick(o[0])}}else if(this.suggestedJobResults.length&&this.suggestedJobResults[t]){var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}else if(this.isMilitarySearch){if(this.allSuggestions.searched.length&&this.allSuggestions.searched[t]){this.setMOSKeyword(this.allSuggestions.searched[t]),this.mosCode=this.suggestedMOSKeywords[t].mos_code,this.isMOSClick=!0;var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}else if(this.allJobCategories.length&&this.allJobCategories[t]){var o=this.element.querySelector(".listitem-focused a");this.fireClick(o)}}},t.prototype.fireClick=function(e){if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),e.dispatchEvent(t)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},t.prototype.getActiveIndex=function(e){var t=this,o=-1;switch(e){case"typehead":return this.searchValue.length>0?this.isMilitarySearch?this.suggestedMOSKeywords.forEach(function(e,i){e.title==t.searchValue&&(o=i)}):this.suggestedJobResults.forEach(function(e,i){var a=e&&e.key||e&&e.category;a&&a==t.searchValue&&(o=i)}):this.allJobCategories&&this.allJobCategories.length&&this.allJobCategories.forEach(function(e,i){e.key==t.searchValue&&(o=i)}),o}return o},t.prototype.clearFieldValue=function(e){},t.prototype.getActiveIndexOnBlur=function(e,t){this.gsClrTxt=0,this.isSearchInFocus=!1,this.element.querySelector(c)!=document.activeElement&&(this.searchBoxBackdrop=!1),this.showDropDown=!1,this.isMilitarySearch&&this.setMOSFocusField(e)},t.prototype.setFocusField=function(e,t){this.focusedField=e,t?(this.focusedField=void 0,this.showDropDown=!1):this.isMilitarySearch&&this.searchValue.length>0&&0==this.suggestedMOSKeywords.length?this.handleBlur():document.activeElement===this.element.querySelector(c)&&(this.showDropDown=!0)},t.prototype.getUrl=function(t,o,i,a,r){if(this.partnerUrl){var n=this.commonService.getParam("partnersUrl")||"",s=e.prototype.getUrl.call(this,t,o,i,a,r);return s=s.replace(this.commonService.getBaseUrl(),n)}if("job"==o||"search-results"==this.searchUrl||"category"==o){if(this.rk&&this.rk.length&&"job"!=o&&(a="&rk="+this.rk),"category"==o&&"search-results"!=this.searchUrl){a=a+"&category="+encodeURIComponent(i.key||i.name||"");var c=e.prototype.getUrlQueryString.call(this,t,this.searchUrl,i,a,r),l=-1==this.searchUrl.indexOf("?")?"?":"&",s=this.commonService.getBaseUrl()+this.searchUrl+l+c;return s}return e.prototype.getUrl.call(this,t,o,i,a,r)}var c=e.prototype.getUrlQueryString.call(this,t,this.searchUrl,i,a,r),l=-1==this.searchUrl.indexOf("?")?"?":"&",s=this.commonService.getBaseUrl()+this.searchUrl+l+c;return s},t.version="v3",t.ddoKey="ddoKey",t.ddoKeyEvent="ddoKeyEvent",t.ddoKeyMOSSEARCH="ddoKeyMOSSEARCH",t.ddoKeyGlobalSearchConfig="ddoKeyGlobalSearchConfig",t.elementTag="ph-global-search-"+d.version,t.globalSearchKeywords="globalSearch_keywords",t.searchKeywords="keywords",t.ddoKeyAgp="ddoKeyAgp",t.ddoKeyEagerLoad="ddoKeyEagerLoad",__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"placeholderText",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"showTitle",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"showCaption",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"searchValue",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"arrowNavigation",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"mosVisibleCategories",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"isEmptyredirection",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"reloadOnClear",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"checkValidation",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"searchUrl",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"isLandingPage",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"rk",void 0),__decorate([o.bindable,__metadata("design:type",Number)],t.prototype,"categoryColumnCount",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"partnerUrl",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"inlineSearch",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"preFillSearchedKey",void 0),t=d=__decorate([o.customElement(d.elementTag),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(h=void 0!==i.CommonService&&i.CommonService)&&h||Object,n.GlobalSearchService,a.EventAggregator,"function"==typeof(p=void 0!==i.LocalStorageAPI&&i.LocalStorageAPI)&&p||Object,Object])],t);var d,h,p}(i.PhenomWidget);t.GlobalSearch=d}),define("text!v3/ph-global-search.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-job-status-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeyGetAppliedJobs:"getAppliedJobs",jobDetail:"jobDetail"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-job-status-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e,this.isUpdated=null,this.jobStatuses={}}return e.prototype.getStatuses=function(e,t,o){var i=this;this.isUpdated=!1,this.jobStatuses={},this.commonService.getDDO(e,t,{jobSeqNos:o}).then(function(e){e&&e[t]&&(i.jobStatuses=e[t].data||{},i.isUpdated=!0)})},e.prototype.archivedJD=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){if(e&&e[t]&&e.jobDetail.data)return e.jobDetail.data.job})},e.prototype.getStatus=function(e){var t=this;return new Promise(function(o){var i=function(){if(t.isUpdated){var a=t.jobStatuses[e];o(a)}else window.setTimeout(i,8)};i()})},e=__decorate([o.singleton(),o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.JobStatusService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function n(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(n,s)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(n=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(n=c.trys,!(n=n.length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){c.label=o[1];break}if(6===o[0]&&c.label<n[1]){c.label=n[1],n=o;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(o);break}n[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{a=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,n,s,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-job-status",["require","exports","aurelia-framework","ph-common","./ph-job-status-config","./ph-job-status-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-job-status-v1",s=function(e){function t(t,o,i){var a=e.call(this,t,o,n)||this;return a.element=t,a.commonService=o,a.jobStatusService=i,a.arrjoblist=null,a.mode="",a.jobid="",a.jobId="",a.jobSeqNo="",a.isApplied=null,a.jobDetails={},a}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this);var t=this.jobid||this.jobId||this.jobSeqNo;if(this.jobId=t,"jobstatus"===this.mode)this.getJobState();else{if(t||console.warn("ph-job-status: jobid required..."),"null"!=this.arrjoblist&&this.arrjoblist){var o=this.arrjoblist.map(function(e){return e.jobSeqNo});this.jobStatusService.getStatuses(n,a.WidgetConfig.v1.ddoKeyGetAppliedJobs,o)}this.updateStatus()}},t.prototype.updateStatus=function(){var e=this;!function(){__awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.jobStatusService.getStatus(this.jobId)];case 1:return e=t.sent(),this.isApplied=e,[2]}})})}()},t.prototype.getJobState=function(){var t=this,o=e.prototype.getQueryParam.call(this,"jobstatus"),i=e.prototype.getQueryParam.call(this,"jobid"),r=e.prototype.getQueryParam.call(this,"reqtype"),s=e.prototype.getQueryParam.call(this,"sitetype"),c={pageName:"job",jobSeqNo:i,jobId:i};"none"==r&&"University"!=s&&"archive"===o?this.jobStatusService.archivedJD(n,a.WidgetConfig.v1.jobDetail,c).then(function(e){e?"archive"==e.jobStatus?(t.jobDetails=e,t.jobDetails.nojobData=!1):console.info("job: "+i+" is not archived..."):(t.jobDetails={nojobData:!0},console.info("job: "+i+" is not available..."))}):this.jobDetails={reqType:r,siteType:s,jobStatus:o,jobSeqNo:i}},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"arrjoblist",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"mode",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"jobid",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"jobId",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"jobSeqNo",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(s=void 0!==i.CommonService&&i.CommonService)&&s||Object,r.JobStatusService])],t);var s}(i.PhenomWidget);t.JobStatus=s}),define("text!v1/ph-job-status.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("text!v1/views/ph-job-status-v1/default/view.html",["module"],function(e){e.exports="<template>\r\n\x3c!-- view html here --\x3e\r\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v2/ph-cookie-popup-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v2:{ddoKey:"cookiePopup",storeOneTrustCookieSession:"storeOneTrustCookieSession"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.CookiePopupService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v2/ph-cookie-popup",["require","exports","aurelia-framework","ph-common","aurelia-event-aggregator","./ph-cookie-popup-service"],function(e,t,o,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="ph-cookie-popup-v2",s=window,c="top",l='[as-element^="ph-cookie-popup"] .ph-sticky-header',d="ph:gdpr:OptanonWrapperUpdated",h='[as-element*="header"] .ph-sticky-header, .header-layout .pcs-sticky-header ,.header-layout .ph-sticky-block-fixed',p={top:"cookie-popup-top",bottom:"cookie-popup-bottom"},u=function(e){function t(t,o,i,a,r,l){var h=e.call(this,t,o,n)||this;return h.element=t,h.commonService=o,h.cookiePopupService=i,h.cookieManager=a,h.eventAggregator=r,h.localStorageContext=l,h.doNotHide=!1,h.showCookiePopup=!0,h.cookieValue="",h.position=c,h.isAccepted=!0,h.cookieType="",h.cookieWindowType="default",h.subscriptions=[],h.handleExternalCookie=function(e,t){t=t||{};var o=[],i=e.availOnAllowedCookies||[],a=t.groups||s.OnetrustActiveGroups,r=!0;if(a){a=a.split(",");for(var n=0;n<i.length;n++)if(i[n]&&-1===a.indexOf(i[n])){r=!1;break}h.cookieValue="d",r&&(h.cookieValue="a"),h.setCookie();var c={};if(e.trackCookieMap&&e.trackCookieMap.cookieMap){var l=h.getEnabledCookies(a);o=h.getDisabledCookies(e.trackCookieMap.cookieMap,l),c.disabledCookies=o,c.cookieMap=e.trackCookieMap.cookieMap,h.addCareerSiteCookies(e,l),h.deleteCareerSiteCookies(e,o),h.addOneTrustSessionData(e,o)}h.raiseActionEvent(d,c)}},h}return __extends(t,e),t.prototype.created=function(){var e=this,t=this.commonService.getSiteSettings("externalCookieConfig");if(t)return void this.initiateExternalCookie(t);this.subscriptions.push(this.eventAggregator.subscribe("close_cvd_popup",function(){e.setCookieBodyHeight()}))},t.prototype.attached=function(){var t=this;if(!this.isExternalCookieEnabled){e.prototype.attached.call(this);var o=this.commonService.getSiteSettings("gdpr");this.cookieType=o?o.cookieType:"",this.cookieWindowType=o&&o.cookieWindowType||"default",this.position=o&&o.position||c,this.cookieValue=this.cookieManager.get("PHPPPE_GCC"),this.showCookiePopup="s"==this.cookieValue||!1,this.cookieValue?(("tentative"==this.cookieType&&"u"==this.cookieValue||"sticky"==this.cookieType&&"s"==this.cookieValue)&&(this.handleCookieArea(),this.doNotHide&&(this.cookieValue="d","tentative"==this.cookieType?this.setGdprCookie(!0):this.setGdprCookie(!1),this.setCookie(),this.commonService.removeRecomContentFromLocalStorage())),this.isAccepted="a"==this.cookieValue,this.raiseGdprActionEvent(),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)):setTimeout(function(){t.showCookiePopup=!0,t.handleCookieArea()},10),this.subscriptions.push(this.eventAggregator.subscribe("close_cookie_popup",function(e){t.doNotHide||(t.showCookiePopup=!1,t.setCookieAction(!1)),t.isAccepted=!(!e||!e.cookieValue||"a"!=e.cookieValue)}))}},t.prototype.initiateExternalCookie=function(e){var t=this;this.isExternalCookieEnabled=!0,e.scriptUrl&&!e.scriptUrl.startsWith("http")&&(e.scriptUrl=this.commonService.getCdnUrl()+"/"+e.scriptUrl);var o=document.createElement("script");o.src=e.scriptUrl,o.setAttribute("data-document-language","true"),o.type="text/javascript",o.setAttribute("aync",""),o.setAttribute("data-domain-script",e.domainKey),o.setAttribute("charset","UTF-8"),e.ignoreOverrideOptanon?e.ignoreOverrideOptanon&&(s.phApp.OptanonWrapper=this.handleExternalCookie.bind(this,e)):o.onload=function(){s.OptanonWrapper=t.handleExternalCookie.bind(t,e)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i)},t.prototype.addOneTrustSessionData=function(e,t){var o={},i=[];e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&(t.forEach(function(t){e.trackCookieMap.csCookies[t].forEach(function(e){i.includes(e)||i.push(e)})}),o.onetrustDisabledCookies=i,this.cookiePopupService.makeDDORequest(n,"storeOneTrustCookieSession",o))},t.prototype.deleteCareerSiteCookies=function(e,t){var o=this;e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){e.trackCookieMap.csCookies[t].forEach(function(e){o.cookieManager.delete(e)})})},t.prototype.addCareerSiteCookies=function(e,t){var o=this,i=new Date;i.setTime(i.getTime()+7776e6);var a={expires:i,path:"/"};e.trackCookieMap&&e.trackCookieMap.csCookies&&t&&t.forEach(function(t){var i=e.trackCookieMap.csCookies[t];i&&i.forEach(function(e){"VISITED_VARIANT"!=e&&"external"!=o.getCareerSiteCookieValue(e)&&o.cookieManager.set(e,o.getCareerSiteCookieValue(e),a)})})},t.prototype.getCareerSiteCookieValue=function(e){var t=s.phApp.locale;switch(t=t.split("_"),e){case"VISITED_COUNTRY":return t[1];case"VISITED_LANG":return t[0];case"VISITED_VARIANT":return this.getSiteVariant(window.phApp.siteType)}},t.prototype.getSiteVariant=function(e){return e&&"internal"==e?"i":e||void 0},t.prototype.getEnabledCookies=function(e){for(var t=[],o=0;o<e.length;o++)""!=e[o]&&t.push(this.getCookieName(e[o]));return t},t.prototype.getDisabledCookies=function(e,t){var o=[];for(var i in e)t.includes(i)||o.push(i);return o},t.prototype.getCookieName=function(e){if(e)switch(e){case"C0001":case"1":return"essential";case"C0002":case"2":return"performance";case"C0003":case"3":return"functional";case"C0004":case"4":return"analytics";case"C0005":case"5":return"social"}},t.prototype.handleCookieArea=function(){var e=this,t=this.commonService.getSiteSettings("gdpr");this.doNotHide||this.toggleBodyClass(),t&&t.hasOwnProperty("cookieType")&&!this.cookieValue&&this.setGdprCookie(!0),setTimeout(function(){e.setCookieBodyHeight()},0),window.addEventListener("resize",function(){e.setCookieBodyHeight()}),this.addModalPopup()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.setCookieBodyHeight=function(){var e=this;if(this.showCookiePopup){var t=document.querySelector(".ph-header"),o=document.querySelector("body"),i=document.querySelector(l),a=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),r=document.querySelector(h);for(this.element.contains(r)&&(r=void 0);t&&i;)if(t&&t.firstElementChild&&window.getComputedStyle(t).position,!(t=t.firstElementChild)){var n=a&&a.offsetHeight||0,s=i&&i.offsetHeight;"bottom"==this.position?(o.style.paddingBottom=s+"px",i&&(i.style.bottom=0),i&&(i.style.top="auto")):(o.style.paddingTop=n+s+"px",i&&(i.style.top=n+"px"),r&&(r.style.top=n+s+"px")),r&&setTimeout(function(){e.setCookieBodyHeight()},5e3)}}else window.removeEventListener("resize",function(){e.setCookieBodyHeight()})},t.prototype.addModalPopup=function(){var t=this;this.element.querySelector(".ph-a11y-modal-area")&&setTimeout(function(){var o=t.element.querySelector(".ph-a11y-popup-start-focus");t.closePopupCallback(o,"ph-a11y-modal-area"),e.prototype.openDialogPopup.call(t,"ph-a11y-modal-area",document.body,o)},0)},t.prototype.closePopupCallback=function(t,o){var i=this;document.addEventListener("keyup",function(t){"Escape"!=t.key&&27!==t.keyCode&&27!==t.which||e.prototype.closeDialogPopup.call(i)})},t.prototype.removeCookieBodyHeight=function(){var e=document.querySelector("body"),t=document.querySelector(l),o=document.querySelector('[as-element^="ph-cvd"][placement="header"] .ph-sticky-header'),i=document.querySelector(h);if(o&&t.offsetHeight){var a=e.style.paddingTop;a=parseInt(a)-t.offsetHeight+"px",e.style.paddingTop=a,o.style.top="0px",i&&(i.style.top=e.style.paddingTop)}else e.style.removeProperty("padding-top"),i&&(i.style.top="0px")},t.prototype.setCookie=function(){var e=new Date;e.setTime(e.getTime()+7776e6);var t={expires:e,path:"/"},o=this.commonService.getSiteSettings("gdpr");o&&o.parentDomainCookie&&(t.domain=this.getParentDomain(".com")),this.cookieManager.set("PHPPPE_GCC",this.cookieValue,t)},t.prototype.getParentDomain=function(e){var t=window.location.hostname.indexOf(".");return t<window.location.hostname.indexOf(".com")?window.location.hostname.substring(-1==t?0:t+1):window.location.hostname},t.prototype.setGdprCookie=function(e){var t=!!this.cookieValue;e?"tentative"==this.cookieType?this.cookieValue?this.cookieValue="a":this.doNotHide?(this.cookieValue="d",this.isAccepted=!1,this.commonService.removeRecomContentFromLocalStorage()):this.cookieValue="u":"sticky"!=this.cookieType||t?this.cookieValue="a":(this.doNotHide&&(this.isAccepted=!1),this.cookieValue="s"):this.cookieValue="d",this.setCookie(),(!e||t&&"u"!=this.cookieValue)&&this.eventAggregator.publish("close_cookie_popup",{cookieValue:this.cookieValue}),e&&"s"!=this.cookieValue||this.commonService.removeRecomContentFromLocalStorage();var o={},i=e?"cookies_allow_click":"cookies_decline_click";this.commonService.processTrackingEvent(i,void 0,o),this.raiseGdprActionEvent()},t.prototype.acceptAndClose=function(){this.setGdprCookie(!0),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.declineAndClose=function(){this.setGdprCookie(!1),this.showCookiePopup=!1,this.setCookieAction(!0),this.raiseActionEvent("ph:gdpr:consent:closed"),this.commonService.setIsGdprConsentClosed&&this.commonService.setIsGdprConsentClosed(!0)},t.prototype.raiseGdprActionEvent=function(){"d"==this.cookieValue?this.raiseActionEvent("ph:gdpr:cookie:declined"):"a"==this.cookieValue&&this.raiseActionEvent("ph:gdpr:cookie:accepted")},t.prototype.raiseActionEvent=function(e,t){var o=new CustomEvent(e,{bubbles:!0,detail:t||{}});document.dispatchEvent(o)},t.prototype.setCookieAction=function(t){this.toggleBodyClass(),this.removeCookieBodyHeight(),e.prototype.hideContainer.call(this)},t.prototype.toggleBodyClass=function(){var e=this.showCookiePopup,t=document.querySelector("body");t&&(e?t.classList.contains(p[this.position])||(t.className=t.className+" "+p[this.position]):t.className=t.className.replace(p[this.position],""))},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"doNotHide",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(u=void 0!==i.CommonService&&i.CommonService)&&u||Object,r.CookiePopupService,"function"==typeof(g=void 0!==i.CookieManager&&i.CookieManager)&&g||Object,a.EventAggregator,"function"==typeof(f=void 0!==i.LocalStorageContext&&i.LocalStorageContext)&&f||Object])],t);var u,g,f}(i.PhenomWidget);t.CookiePopup=u}),define("text!v2/ph-cookie-popup.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-language-selector-config",["require","exports"],function(e,t){"use strict";t.WidgetConfig={v1:{ddoKey:"supportedLanguages"}}}),define("v1/ph-language-selector-model",["require","exports"],function(e,t){"use strict"});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-language-selector-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";var a=function(){function e(e){this.commonService=e}return e.prototype.supportedLanguages=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t].data})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.LanguageSelectorService=a});var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-language-selector",["require","exports","aurelia-framework","ph-common","./ph-language-selector-config","./ph-language-selector-service"],function(e,t,o,i,a,r){"use strict";var n="ph-language-selector-v1",s=function(e){function t(t,o,i){e.call(this,t,o,n),this.languageSelectorService=i,this.samePage=!1,this.supportedLanguages=[]}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.hideLoader.call(this),this.supportedLangs()},t.prototype.supportedLangs=function(){var t=this;e.prototype.unhideLoader.call(this),this.languageSelectorService.supportedLanguages(n,a.WidgetConfig.v1.ddoKey).then(function(o){e.prototype.hideLoader.call(t),t.supportedLanguages=o;var i=t.commonService.getLocale()||"";t.supportedLanguages&&t.supportedLanguages.forEach(function(e){e.locale=e.locale.toLowerCase(),e.locale.toLowerCase()===i.toLowerCase()&&(t.chosenLanguage=e)})})},t.prototype.languageChanged=function(e){if(e){var t=e.baseUrl;this.samePage&&(t+=location.pathname,location.search&&location.search.trim().length>0&&(t+=location.search)),location.assign(t)}},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"samePage",void 0),t=__decorate([o.customElement(n),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(s=void 0!==i.CommonService&&i.CommonService)&&s||Object,r.LanguageSelectorService])],t);var s}(i.PhenomWidget);t.LanguageSelector=s}),define("text!v1/ph-language-selector.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-language-selector-v1/default/view.html",["module"],function(e){e.exports='<template>\n    Supported Languages\n    <div repeat.for="lang of supportedLanguages">\n        <a click.delegate="languageChanged(lang)"> ${lang.locale}</a>\n    </div>\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v1/ph-search-results-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatusList:"getJobStatusListV2"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-search-results-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.SearchResultsService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}
;define("v1/ph-search-results",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common","./ph-search-results-config","./ph-search-results-service"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="v1",c="ph-search-results-"+s,l="ph:data:updated:event",d="professional",h=function(e){function t(t,o,i,a){var n=e.call(this,t,o,c)||this;return n.element=t,n.commonService=o,n.searchResultsService=i,n.eventAggregator=a,n.pageSize=50,n.jobDateFormat="DEFAULT",n.bulkcart=!1,n.paginationBlockSize=10,n.mobilePaginationBlockSize=5,n.searchParams={},n.subscriptions=[],n.jobResults=[],n.totalJobs=0,n.isMostPopular=!1,n.currentSelectedPage=1,n.startingJobNumberInPage=1,n.endingJobNumberInpage=1,n.prevButtonVisibility=!0,n.nextButtonVisibility=!0,n.paginationRange=[],n.mobilePaginationRange=[],n.searchSelectionKeys=[],n.paginationUrls={},n.mobilePaginationUrls={},n.isDataUpdated=!1,n.noResults=!1,n.isSubsearch=!1,n.clearResults="",n.clearAll=!1,n.addFocusToTitle=!1,n.selectedReqType="",n.isLoggedIn=!1,n.isFetchCount=0,n.addJobContext=function(){n.commonService.addJobContext(c,n.jobResults),n.commonService.jobContext(c)},n.handleSearchResultsEvent=function(t){if(t){if(e.prototype.hideLoader.call(n),n.jobResults=t.jobResults||[],n.totalJobs=t.totalJobs||0,n.searchSelectionKeys=t.searchSelectionKeys||{},n.searchParams=t.searchParams||{},n.currentSelectedPage=1,n.searchKeyword=t.searchKeyword,n.locationKey=t.locationKeyword,n.pageSize=t.pageSize||n.pageSize,n.selectedSkillKeywords=t.selectedSkills||"",n.noResults=t.allResults,n.clearResults=t.clearResults,n.clearAll=t.clearAll,n.searchParams&&!n.searchParams.sortBy&&(n.searchParams.sortBy="Most relevant"),n.jobResults.forEach(function(e){e.fitLevel&&"BAD FIT"==e.fitLevel.toUpperCase()&&(e.fitLevel=null)}),(t.isLocationSlider||!n.isErrorMsgReqd&&n.jobResults.length)&&e.prototype.showContainer.call(n),n.addJobContext(),n.searchParams.from>0&&(n.currentSelectedPage=Math.ceil(n.searchParams.from/n.pageSize)+1),n.applyPagination(),n.searchParams.isMostPopular&&(n.isMostPopular=!0),n.bulkcart&&!n.commonService.isCrawlerUserAgent()){for(var o=[],i=0,a=n.jobResults;i<a.length;i++){var d=a[i];n.jobResults.isJobSaved=null,n.jobResults.saveJobInterState=null,n.jobResults.inProgress=!1,o.push(d.jobSeqNo)}var h={jobSeqNos:o};n.searchResultsService.makeDDORequest(c,r.WidgetConfig[s].ddoKeyStatusList,h).then(function(e){if(e&&e.data)for(var t=e.data,o=0,i=n.jobResults;o<i.length;o++){var a=i[o];a.isJobSaved=t[a.jobSeqNo]||!1,a.saveJobInterState=t[a.jobSeqNo]||!1}})}n.isDataUpdated=!0,n.eventAggregator.publish(l,{isDataUpdated:n.isDataUpdated})}setTimeout(function(){n.isSortByResults?(n.isSortByResults=!n.isSortByResults,n.sortByTarget?n.sortByTarget.focus():n.addFocusToTitle=!0):n.addFocusToTitle=!0},10)},n.isLocalDataSourceFn=function(){return!0},n.selectedReqType=e.prototype.getQueryParam.call(n,"rt")||d,n.addSubscriptions(),n}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),e.prototype.unhideLoader.call(this)},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.addSubscriptions=function(){var t=this;this.subscriptions.push(this.eventAggregator.subscribe("ph:searchResults",this.handleSearchResultsEvent)),this.subscriptions.push(this.eventAggregator.subscribe("ph:fetchingResults",function(){t.isDataUpdated=!1,e.prototype.unhideLoader.call(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:searchType:changed",function(e){e&&e.searchType&&(t.selectedReqType=e.searchType)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:isUserLoggedIn",function(e){t.isLoggedIn=e.isLoggedIn})),this.subscriptions.push(this.eventAggregator.subscribe("ph:noJobsFound",function(o){t.isErrorMsgReqd||e.prototype.hideContainer.call(t)})),this.subscriptions.push(this.eventAggregator.subscribe("scrollToResults",function(e){t.element.scrollIntoView()}))},t.prototype.applyPagination=function(){var e=Math.ceil(this.totalJobs/this.pageSize),t=Math.ceil(this.paginationBlockSize/2),o=Math.ceil(this.paginationBlockSize/2)-1,i=Math.floor(this.mobilePaginationBlockSize/2),a=Math.floor(this.mobilePaginationBlockSize/2),r=e<this.paginationBlockSize?e:this.paginationBlockSize,n=e<this.mobilePaginationBlockSize?e:this.mobilePaginationBlockSize,s=this.currentSelectedPage-t>1?this.currentSelectedPage-t:1,c=this.currentSelectedPage+o>r?this.currentSelectedPage+o:r,l=this.currentSelectedPage-i>1?this.currentSelectedPage-i:1,d=this.currentSelectedPage+a>n?this.currentSelectedPage+a:n;c>e&&(c=e),d>e&&(d=e);var h=this.paginationBlockSize-(c-s);h>0&&(s-=h);var p=this.mobilePaginationBlockSize-(d-l+1);p>0&&(l-=p),this.paginationRange=[];for(var u=s;u<=c;u++)u>0&&(this.paginationRange.push(u),this.paginationUrls[u]=this.paginationUrl(u));this.mobilePaginationRange=[];for(var u=l;u<=d;u++)u>0&&(this.mobilePaginationRange.push(u),this.mobilePaginationUrls[u]=this.paginationUrl(u));this.startingJobNumberInPage=this.totalJobs?(this.currentSelectedPage-1)*this.pageSize+1:0,this.endingJobNumberInpage=this.totalJobs>this.currentSelectedPage*this.pageSize?this.currentSelectedPage*this.pageSize:this.totalJobs,this.prevButtonVisibility=1!=this.currentSelectedPage,this.nextButtonVisibility=this.currentSelectedPage<e},t.prototype.clearSelection=function(e){e&&1==this.searchSelectionKeys.length?this.emptySelectionsAndCallSearch():e&&(e.checked=!1),this.eventAggregator.publish("ph:clearSelection",e)},t.prototype.emptySelectionsAndCallSearch=function(){this.searchSelectionKeys=[],this.eventAggregator.publish("ph:resetAll",{}),setTimeout(function(){var e=document.querySelectorAll(".jobs-list-item a")[0];e&&e.focus()},2e3)},t.prototype.clearSubSearchAndCallSearch=function(){this.eventAggregator.publish("ph:subSearchReset",this.searchParams.subsearch),this.searchParams.subsearch="";var e=this.element.querySelector(".ph-a11y-subsearch");e&&e.focus()},t.prototype.filterSearch=function(){this.eventAggregator.publish("ph:subSearch",{subsearch:this.searchParams.subsearch})},t.prototype.sortfilterSearch=function(t){t&&(this.sortByTarget=t.target,this.isSortByResults=!0),this.eventAggregator.publish("ph:sortBy",{sortBy:this.searchParams.sortBy}),e.prototype.focusElement.call(this,".ph-a11y-sortby select",100)},t.prototype.showFacetFilter=function(){var e=this.element;this.eventAggregator.publish("ph:showfilter",e)},t.prototype.paginationUrl=function(t){var o=this,i=(t-1)*this.pageSize,a="",r=window.location.origin+window.location.pathname,n=e.prototype.getQueryParam.call(this,"keywords"),s=e.prototype.getQueryParam.call(this,"lk"),c=e.prototype.getQueryParam.call(this,"storeName"),l=e.prototype.getQueryParam.call(this,"rk")||this.commonService.getSessionParam("rk"),d=e.prototype.getQueryParam.call(this,"category"),h=e.prototype.getQueryParamsMap.call(this),p=Object.keys(h);return this.selectedSkillKeywords&&this.selectedSkillKeywords.length>0&&(n=this.selectedSkillKeywords),void 0!=n&&(a+="keywords="+this.getEncodeQueryParam(n)+"&"),a+=i<=0?"s=1":"from="+i+"&s=1",s&&s.length>0&&(a+="&lk="+this.getEncodeQueryParam(s)),l&&l.length>0&&(a+="&rk="+this.getEncodeQueryParam(l)),c&&c.length>0&&(a+="&storeName="+this.getEncodeQueryParam(c)),d&&d.length>0&&(a+="&category="+this.getEncodeQueryParam(d)),p.forEach(function(t,i){var r=e.prototype.getQueryParam.call(o,t);r&&r.length&&r.startsWith("qk")&&(a+="&"+t+"="+r)}),this.clearAll&&("rules"==this.clearResults&&(a=a.replace("&lk="+s,""),a=a.replace("&category="+d,""),a=a.replace("&storeName="+c,"")),"keywords"==this.clearResults&&(a=a.replace("keywords="+n,"")),"full"==this.clearResults&&(a="",a+=i<=0?"s=1":"from="+i+"&s=1")),r+="?"+a},t.prototype.getEncodeQueryParam=function(e){try{e=decodeURIComponent(e)}catch(e){a.logger.error(e)}return encodeURIComponent(e)},t.prototype.handleGotoPageButton=function(t){e.prototype.getElement.call(this).scrollIntoView(),this.eventAggregator.publish("ph:gotoPageEvent",t)},t.prototype.handleSaveJob=function(e){this.bulkcart&&!e.inProgress&&(e.inProgress=!0,e.saveJobInterState?this.deleteJobFromCart(e):this.addToJobCart(e))},t.prototype.addToJobCart=function(e){var t=this,o={job:{title:e.title,jobSeqNo:e.jobSeqNo,location:e.location,type:e.type,shortDescription:e.descriptionTeaser,applyUrl:e.applyUrl,category:e.category,postedDate:e.postedDate,expiryDate:e.expiryDate,reqId:e.reqId,multi_location:e.multi_location}};this.searchResultsService.makeDDORequest(c,r.WidgetConfig[s].ddoKeyAdd,o).then(function(o){if(e.inProgress=!1,"602"==o.status){var i={trait5:e.jobSeqNo,trait14:e.category};e.saveJobInterState=!0,t.eventAggregator.publish("jobCartCount","+1"),t.eventAggregator.publish("jobCartUpdatedCount",""),t.commonService.raiseCustomEvent&&t.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),t.commonService.processTrackingEvent("job_added_to_jobcart",void 0,i)}else e.isJobSaved=!1,e.saveJobInterState=!1})},t.prototype.deleteJobFromCart=function(t){var o=this,i={jobSeqNo:t.jobSeqNo};this.searchResultsService.makeDDORequest(c,r.WidgetConfig[s].ddoKeyDelete,i).then(function(i){if(t.inProgress=!1,"605"==i.status){var a={};t.isJobSaved=!1,t.saveJobInterState=!1,o.eventAggregator.publish("jobCartCount","-1"),o.eventAggregator.publish("jobCartUpdatedCount",""),o.commonService.raiseCustomEvent&&o.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),a={jobSeqNo:t.jobSeqNo,category:t.category},e.prototype.trackWidgetClick.call(o,"job_unfavorited",a)}else t.isJobSaved=!0,t.saveJobInterState=!0})},t.prototype.stringify=function(e){return JSON.stringify(e)},t.prototype.handleJobClick=function(t){var o={params:{widgetId:c,widgetview:e.prototype.getView.call(this),widgetName:e.prototype.getWidgetName.call(this,!1)}};t.fitLevel&&(o.params.jobFitLevel=t.fitLevel);var i=(new Date).getTime()+(65536*(1+Math.random())|0).toString(16).substring(0);return this.commonService.storePageTrackEventData(i,t),this.commonService.processTrackingEvent("job_click",i,o,{}),!0},t.prototype.showAllLocations=function(t){var o=this;t.popUpOpen=!0,setTimeout(function(){var i=o.element.querySelector(".multi-location-popup"),a=o.element.querySelector(".ph-a11y-multi-location-"+t.jobId),r=o.element.querySelector(".ph-a11y-close-multi-location");i&&a&&r&&e.prototype.openDialogPopup.call(o,"multi-location-popup",a,r)},50);var i={jobSeqNo:t.jobSeqNo,category:t.category};e.prototype.trackWidgetClick.call(this,"multi_location_click",i)},t.prototype.hideAllLocations=function(t){t.popUpOpen=!1,e.prototype.closeDialogPopup.call(this);var o={jobSeqNo:t.jobSeqNo};e.prototype.trackWidgetClick.call(this,"popup_close_click",o)},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"pageSize",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"jobDateFormat",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"bulkcart",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"paginationBlockSize",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"mobilePaginationBlockSize",void 0),t=__decorate([o.customElement(c),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(h=void 0!==a.CommonService&&a.CommonService)&&h||Object,n.SearchResultsService,i.EventAggregator])],t);var h}(a.PhenomWidget);t.SearchResults=h}),define("text!v1/ph-search-results.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-search-results-v1/im/view.html",["module"],function(e){e.exports='<template>\n\n\t<div class="phs-facet-results-block">\n\t\t<div class="phs-results-actions">\n\t\t\t\x3c!--Header part for search results--\x3e\n\t\t\t<div class="phs-jobs-list-header">\n\t\t\t\t<p role="contentinfo">\n\t\t\t\t\t<span class="total-jobs"> ${totalJobs} </span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<ppc-content key="showingText">Results for ${isCritical ? \'Critical Jobs\' : \'"\' + searchKeyword + \'"\'} </ppc-content>\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t\x3c!--End Header part for search results--\x3e\n\n\t\t\t\x3c!--Facet Tags--\x3e\n\t\t\t<ul class="phs-facet-tags" data-ph-at-id="facet-all-added-tags" show.bind="searchSelectionKeys.length">\n\t\t\t\t<li class="tag" repeat.for="selection of searchSelectionKeys">\n\t\t\t\t\t<span class="facet-tag" aria-label="${selection.name}">${selection.name}</span>\n\t\t\t\t\t<a href="javascript:void(0)" role="button" key-role="btnRole" click.delegate="clearSelection(selection)">\n\t\t\t\t\t\t<ppc-content type="icon">\n\t\t\t\t\t\t\t<i class="icon icon-cancel" aria-hidden="true"></i>\n\t\t\t\t\t\t</ppc-content>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t<li class="phs-facet-tags-clear">\n\t\t\t\t\t<a class="clearall" href="javascript:void(0)" click.delegate="emptySelectionsAndCallSearch()" role="button" key-role="btnRole" aria-label="Clear all selections" key-aria-label="clearAllSelectionLink" data-ph-at-id="clear-all-facet-tags">\n\t\t\t\t\t\t<ppc-content key="clearAllText" data-ph-at-id="clear-all-facet-tags">\n\t\t\t\t\t\t\tClear all\n\t\t\t\t\t\t</ppc-content>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\x3c!--End Facet Tags--\x3e\n\t\t</div>\n\t\t\x3c!--Facet results--\x3e\n\t\t<div class="phs-jobs-list">\n\t\t\t<div class="phs-jobs-block">\n\t\t\t\t<ul>\n\t\t\t\t\t<li class="jobs-list-item" repeat.for="result of jobResults">\n\t\t\t\t\t\t<div class="information-block">\n\t\t\t\t\t\t\t<div class="information">\n\t\t\t\t\t\t\t\t<div class="information-text">\n\t\t\t\t\t\t\t\t\t<div class="job-meta">${result.category}</div>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0)" role="link" key-role="linkRole" tabindex="0" ref="linkEle" href.bind="getUrl(linkEle, \'job\', result)">\n\t\t\t\t\t\t\t\t\t\t<span class="job-title">${result.title}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<div class="job-additional-info">\n\t\t\t\t\t\t\t\t\t\t<span class="job-location">\n\t\t\t\t\t\t\t\t\t\t\t${result.location}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class="job-category">\n\t\t\t\t\t\t\t\t\t\t\t${result.type}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class="job-date">\n\t\t\t\t\t\t\t\t\t\t\t${result.visibilityType}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="actions">\n\t\t\t\t\t\t\t\t\t<span class="job-suitability-button" data-ph-id="ph-page-element-page16-drqhxl--drqhxl23">\n\n\t\t\t\t\t\t\t\t\t\t${result.fitLevel}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="savejob-checkbox" if.bind="bulkcart">\n\t\t\t\t\t\t\t\t\t\t<label for="save-${result.jobSeqNo}" class="${result.inProgress ? \'disabled\' : \'\'}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="save-${result.jobSeqNo}" checked.bind="result.isJobSaved" change.delegate="handleSaveJob(result)" aria-label="Save ${result.title} ${result.jobSeqNo} to job cart" aria-checked="${result.isJobSaved ? \'true\' : \'false\'}" role="checkbox">\n\t\t\t\t\t\t\t\t\t\t\t<span class="label-content" if.bind="result.isJobSaved === false" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-heart-o" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- <ppc-content key="saveText" aria-hidden="true">Save</ppc-content> --\x3e\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="label-content" if.bind="result.isJobSaved === true" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-heart" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- <ppc-content key="savedText" aria-hidden="true">Saved</ppc-content>  --\x3e\n\t\t\t\t\t\t\t\t\t\t\t</span> \n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="job-description" innerhtml.bind="result.descriptionTeaser | sanitizeHTML">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="job-multi-tags">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li repeat.for="skill of result.skills">\n\t\t\t\t\t\t\t\t\t\t<a class="job-multi-tag-items" href="javascript:void(0)">\n\t\t\t\t\t\t\t\t\t\t\t<ppc-content>\n\t\t\t\t\t\t\t\t\t\t\t\t#${skill}\n\t\t\t\t\t\t\t\t\t\t\t</ppc-content>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!--End Facet results--\x3e\n\t\t\x3c!--pagination starts--\x3e\n\t\t<div class="pagination-block" show.bind="paginationRange.length > 1" data-ph-at-id="pagination">\n\t\t\t<ul class="pagination">\n\t\t\t\t<li>\n\t\t\t\t\t<a href.bind="paginationUrl(currentSelectedPage - 1)" aria-label="View previous page" key-aria-label="viewPrevPage" show.bind="prevButtonVisibility" ph-tevent="pagination_click" data-ph-tevent-attr-trait214="Previous" role="button" key-role="btnRole" data-ph-at-id="pagination-previous-link">\n\t\t\t\t\t\t<ppc-content type="icon">\n\t\t\t\t\t\t\t<span aria-hidden="true" class="icon icon-left-arrow"></span>\n\t\t\t\t\t\t</ppc-content>\n\t\t\t\t\t\t<ppc-content key="previousText" data-ph-at-id="pagination-previous-link" class="sr-only"> Prev </ppc-content>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t<li repeat.for="page of paginationRange" class="${currentSelectedPage == page ? \'active\' : \'\'}">\n\t\t\t\t\t<a href.bind="paginationUrl(page)" ph-tevent="pagination_click" data-ph-tevent-attr-trait214="${page}" role="button" key-role="btnRole" aria-label="page ${page}">${page}</a>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href.bind="paginationUrl(currentSelectedPage + 1)" aria-label="View Next page" key-aria-label="viewnxtPage" show.bind="nextButtonVisibility" ph-tevent="pagination_click" data-ph-tevent-attr-trait214="Next" role="button" key-role="btnRole" data-ph-at-id="pagination-next-link">\n\t\t\t\t\t\t<ppc-content key="nextText" data-ph-at-id="pagination-next-link" class="sr-only"> Next </ppc-content>\n\t\t\t\t\t\t<ppc-content type="icon">\n\t\t\t\t\t\t\t<span aria-hidden="true" class="icon icon-arrow-right"></span>\n\t\t\t\t\t\t</ppc-content>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t\x3c!--pagination ends--\x3e\n\n\t\t\x3c!--Nojobs Found text area--\x3e\n\t\t<div class="no-result-info" show.bind="!totalJobs">\n\t\t\t<figure>\n\t\t\t\t<ppc-content type="image">\n\t\t\t\t\t<img src="../assets/images/no-results.png" alt="" />\n\t\t\t\t</ppc-content>\n\t\t\t</figure>\n\t\t\t<h2 class="no-jobs-available" aria-label="No Jobs Available" key-aria-label="noJobsAvailabel">\n\t\t\t\t<ppc-content key="nojobs">\n\t\t\t\t\tNo Jobs Available \n\t\t\t\t</ppc-content>\n\t\t\t</h2>\n\t\t</div>\n\t\t\x3c!--End Nojobs Found text area--\x3e\n\t</div>\n\n</template>'}),define("text!v1/views/ph-search-results-v1/default/view.html",["module"],function(e){
e.exports='<template>\n        <div class="ph-search-results-area">\n            <div class="phs-facet-results-block">\n                <div class="phs-results-actions">\n                    <div class="search-info" show.bind="searchKeyword" tabindex="0">\n                        <h2 tabindex="0"> \n                            <span>\n                                <ppc-content key="resultsInfoText">\n                                    Search results for \n                                </ppc-content>\n                            </span>\n                            <span>"${searchKeyword}"</span>\n                        </h2>\n                    </div> \n                    <ul class="phs-facet-tags" data-ph-at-id="facet-all-added-tags" >\n                        <li class="tag" repeat.for="selection of searchSelectionKeys" \n                            show.bind="searchSelectionKeys.length > 0">\n                            <span class="facet-tag">${selection.name}</span>\n                            <a href="javascript:void(0)" click.delegate="clearSelection(selection)"\n                            data-ph-at-text="${selection.name}" data-ph-at-id="tag-${selection.facet}">\n                                <ppc-content type="icon">\n                                    <i class="icon icon-cancel"></i>\n                                </ppc-content>\n                                <span class="sr-only">\n                                    <ppc-content key="facetCloseText">\n                                        Close\n                                    </ppc-content> \n                                    ${selection.name}\n                                </span>\n                            </a>\n                        </li>\n                        <li class="phs-facet-tags-clear" show.bind="searchSelectionKeys.length > 0">\n                            <a class="clearall" href="javascript:void(0)" click.delegate="emptySelectionsAndCallSearch()" ph-tevent="clear_searches_click" data-ph-at-id="clear-all-facet-tags">\n                                <ppc-content key="clearAllFacets" data-ph-at-text="clear-all-facet-tags">\n                                    Clear all\n                                </ppc-content>\n                                <span class="sr-only">\n                                    <ppc-content key="clearAllFacetsPostText">\n                                        filter options\n                                    </ppc-content>\n                                </span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n                <div class="phs-jobs-list">\n                    <div class="phs-jobs-list-header">\n                        <div class="show-loader" ph-loading-img="show-loader.bind: showLoader" show.bind="showLoader"></div>\n                        <div class="row">\n                            <div class="col-md-7">\n                                <form action="">\n                                    <label class="sr-only" for="sub_search_textbox">\n                                        <ppc-content key="innerSearchLabelText">\n                                            Search from below list\n                                        </ppc-content>\n                                    </label>\n                                    <div class="input-group input-group-sm has-feedback-search">\n                                        <input type="text" value.bind="searchParams.subsearch" placeholder="Search from below list" key-placeholder="innerSearchPlaceholderText" autocomplete="off" class="form-control" id="sub_search_textbox" \n                                        data-ph-at-id="inner-search-box"/>\n                                            <a class="clear-textbox" id="clear-sub-search-textbox" href="javascript:void(0)" click.delegate="clearSubSearchAndCallSearch()" show.bind="(searchParams.subsearch.trim()).length > 0">\n                                                <ppc-content type="icon">\n                                                    <i class="icon icon-cancel"></i>\n                                                </ppc-content>\n                                                <span class="sr-only">\n                                                    <ppc-content key="clearInnerSearchText">\n                                                        clear text\n                                                    </ppc-content>\n                                                </span>\n                                            </a>\n                                            <span class="input-group-btn">\n                                                <button type="submit" class="btn btn-default ${(searchParams.subsearch.trim()).length > 0 ? \'\': \'disabled\'}" click.delegate="filterSearch()" tabindex="0" data-ph-at-id="inner-search-button">\n                                                    <ppc-content key="innerSearchButtonText" data-ph-at-text="inner-search-button">\n                                                        Go\n                                                    </ppc-content>\n                                                </button>\n                                            </span>\n                                            <ppc-content type="icon">\n                                                <button type="submit" class="btn icon icon-search has-control-feedback ${(searchParams.subsearch.trim()).length > 0 ? \'\': \'disabled\'}" click.delegate="filterSearch()" tabindex="0"></button>\n                                            </ppc-content>\n                                    </div>\n                                </form>\n                            </div>\n                            <div class="col-md-5">\n                                <div class="pull-right phs-header-controls">\n                                    <div tabindex="0" class="phs-jobs-list-count" data-ph-at-id="search-page-top-job-count"\n                                    data-ph-at-count="${totalJobs}">${totalJobs}\n                                        <ppc-content key="totalJobsPostfixText" data-ph-at-text="search-page-top-job-count">jobs</ppc-content>\n                                    </div>\n                                    <div class="phs-jobs-list-sort phs-taglib">\n                                        <label for="sortselect" class="control-label" tabindex="0">\n                                            <ppc-content key="sortByLabelText">Sort by</ppc-content>\n                                        </label>\n                                        <div class="sortby">\n                                            <select id="sortselect" class="form-control" value.bind="searchParams.sortBy" change.delegate="sortfilterSearch()" data-ph-at-id="search-page-sort-drop-down" tabindex="0">\n                                                    <option data-ph-at-text="search-page-sort-drop-down"\n                                                            value="Most relevant" key="mostRelevantText" \n                                                            key-value="mostRelevantValueText">\n                                                            Most relevant\n                                                    </option>\n                                                    <option data-ph-at-text="search-page-sort-drop-down"\n                                                            value="Most recent" key="mostRecentText" \n                                                            key-value="mostRecentValueText">\n                                                        Most recent\n                                                    </option>\n                                                </select>\n                                        </div>\n                                    </div>\n                                    <div class="phs-filter">\n                                        <a href="javascript:void(0)" click.delegate="showFacetFilter()" data-ph-at-id="mobile-facet-filter-menu">\n                                            <span class="sr-only">\n                                                <ppc-content key="filterText">Filter</ppc-content>\n                                            </span>\n                                            <ppc-content type="icon">\n                                                <i class="icon icon-filter"></i>\n                                            </ppc-content>\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="phs-jobs-block" show.bind="!showLoader && totalJobs">\n                        <ul>\n                            <li class="jobs-list-item" repeat.for="result of jobResults">\n                                <div class="information" data-ph-at-id="job-info" \n                                    data-ph-at-job-title-text="${result.title}"\n                                    data-ph-at-job-location-text = "${result.location}"\n                                    data-ph-at-job-category-text = "${result.category}" \n                                    data-ph-at-industry-text = "${result.industry}"\n                                    data-ph-at-job-post-date-text = "${result.postedDate}">\n                                    <a ph-tevent="job_click" ref="linkEle" href.bind="getUrl(linkEle, \'job\', result)">\n                                        <h4>${result.title}</h4>\n                                        <span class="job-location" show.bind="result.location">\n                                            ${result.location}\n                                        </span>\n                                        <span class="job-category" show.bind="result.category">\n                                            ${result.category}\n                                        </span>\n                                        <span class="job-industry" show.bind="result.industry">\n                                            <ppc-content type="icon">\n                                                <i class="icon icon-graduation-cap"></i>\n                                            </ppc-content>\n                                            ${result.industry}\n                                        </span>\n                                        <span class="job-date">\n                                            <span>\n                                                <ppc-content type="icon">\n                                                    <i class="icon icon-filled"></i>\n                                                </ppc-content>\n                                            </span>\n                                            <span>\n                                                <ppc-content key="postedDateText">\n                                                    Posted \n                                                </ppc-content>\n                                            </span>\n                                            ${result.postedDate | dateFormat:getDateFormat(jobDateFormat)}</span>\n                                        <div class="description" innerhtml.bind="result.descriptionTeaser | sanitizeHTML" tabindex="0"></div>\n                                    </a>\n                                </div>\n                                <div class="actions">\n                                    <span tabindex="0">${result.postedDate | dateFormat:getDateFormat(jobDateFormat)}</span>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="no-data-view" show.bind="!totalJobs && !showLoader" \n                         data-ph-at-id="inner-search-no-jobs-found-text">\n                        <div class="no-result-info">\n                            <ppc-content type="image">\n                                <img ph-src="assets/images/no_jobs_found.png" \n                                     key-ph-src="noJobsFoundImgSrc"\n                                     alt="No jobs found" key-alt="noJobsFoundAltText">\n                            </ppc-content>\n                            <h3 show.bind="!searchKeyword" tabindex="0">\n                                <ppc-content key="noJobsFoundInfoText" data-ph-at-text="inner-search-no-jobs-found-text">\n                                     There are no jobs for your search criteria.\n                                </ppc-content>\n                            </h3>\n                            <p tabindex="0">\n                                <ppc-content key="noJobsFoundSuggesionText" data-ph-at-sub-text = "inner-search-no-jobs-found-text">\n                                    Please search again.\n                                </ppc-content>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div class="pagination-block" show.bind="!showLoader && totalJobs">\n                    <div class="search-bottom-count" tabindex="0" \n                         data-ph-at-id="search-results-bottom-count"\n                         data-ph-at-text="search-results-bottom-count">\n                        <span>\n                            <ppc-content key="resultsPrefixText"> Showing </ppc-content>\n                            <span> ${startingJobNumberInPage} </span>\n                        </span>\n                        <span>    \n                            <ppc-content key="resultsSymbol"> - </ppc-content>\n                            <span> ${endingJobNumberInpage} </span>\n                        </span>\n                        <span>\n                            <ppc-content key="resultsPreposition"> of</ppc-content><span> ${totalJobs} </span>\n                        </span>\n                        <span>\n                            <ppc-content key="resultsPostfixText">jobs</ppc-content>\n                        </span>\n                    </div>\n                    <ul class="pagination" show.bind="paginationRange.length > 1" data-ph-at-id="pagination">\n                        <li>\n                            <a href.bind="paginationUrl(currentSelectedPage - 1)" \n                            aria-label="Previous" key-aria-label="prevPaginationAriaLabelText"\n                            show.bind="prevButtonVisibility" ph-tevent="pagination_click" data-ph-tevent-attr-trait214="Previous"\n                            data-ph-at-id="pagination-previous-link">\n                                <ppc-content key="prevPaginationText" data-ph-at-text="pagination-previous-link"> Prev </ppc-content>\n                                <ppc-content type="icon">\n                                    <span aria-hidden="true" class="icon icon-left-arrow"></span>\n                                </ppc-content>\n                            </a>\n                        </li>\n                        <li repeat.for="page of paginationRange" class="${currentSelectedPage == page ? \'active\' : \'\'}">\n                            <a href.bind="paginationUrl(page)" ph-tevent="pagination_click" data-ph-tevent-attr-trait214="${page}">${page}</a>\n                        </li>\n                        <li>\n                            <a href.bind="paginationUrl(currentSelectedPage + 1)" \n                               aria-label="Next" key-aria-label="nextPaginationAriaLabelText"\n                               show.bind="nextButtonVisibility" ph-tevent="pagination_click" data-ph-tevent-attr-trait214="Next"\n                            data-ph-at-id="pagination-next-link">\n                                <ppc-content key="nextPaginationText" data-ph-at-text="pagination-next-link"> Next </ppc-content>\n                                <ppc-content type="icon">\n                                    <span aria-hidden="true" class="icon icon-arrow-right"></span>\n                                </ppc-content>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("v3/ph-job-cart-count-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v3:{ddoKey:"jobCartCountV2"}}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-job-cart-count-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}return e.prototype.jobCartCount=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)&&t||Object])],e);var t}();t.JobCartCountService=a});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v3/ph-job-cart-count",["require","exports","aurelia-framework","ph-common","./ph-job-cart-count-config","./ph-job-cart-count-service","aurelia-event-aggregator"],function(e,t,o,i,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="v3",c="ph-job-cart-count-"+s,l=function(e){function t(t,o,i,r){var n=e.call(this,t,o,c)||this;return n.eventAggregator=i,n.jobCartCountService=r,n.jobCartCount=0,n.getJobCartCount=function(){n.jobCartCountService.jobCartCount(c,a.WidgetConfig[s].ddoKey,{}).then(function(e){n.jobCartCount=e.result})},n.updatedJobCartCount=function(){n.eventAggregator.subscribe("jobCartUpdatedCount",function(e){n.getJobCartCount()})},n}return __extends(t,e),t.prototype.attached=function(){e.prototype.attached.call(this),this.getJobCartCount(),this.updatedJobCartCount()},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),t=__decorate([o.customElement(c),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)&&l||Object,n.EventAggregator,r.JobCartCountService])],t);var l}(i.PhenomWidget);t.JobCartCount=l}),define("text!v3/ph-job-cart-count.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v3/views/ph-job-cart-count-v3/default/view.html",["module"],function(e){e.exports="<template>\n\x3c!-- view html here --\x3e\n</template>"}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function n(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(n,s)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(n=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(n=c.trys,!(n=n.length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){c.label=o[1];break}if(6===o[0]&&c.label<n[1]){c.label=n[1],n=o;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(o);break}n[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{a=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,n,s,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-facets-service",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common"],function(e,t,o,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.commonService=e,this.eventAggregator=t,this.isImSearch=!1,this.ignoreInternalFlow=this.commonService.getSiteSettings("ignoreInternalFlow")}return e.prototype.getSearchData=function(e,t,o,i,a,r,n,s){return void 0===o&&(o=[]),void 0===i&&(i={}),__awaiter(this,void 0,void 0,function(){var c,l,d,h=this;return __generator(this,function(p){switch(p.label){case 0:return c=JSON.parse(JSON.stringify(i)),l="eagerLoadRefineSearch",c.keywords=r?encodeURIComponent(r):"",c.global=!0,c.size=c.size||50,c.all_fields=c.all_fields||["city","state","category","type","orgFunction","country"],c.selected_fields=c.selected_fields||{},o.forEach(function(e){c.selected_fields[e.facet]||(c.selected_fields[e.facet]=[]),-1==c.selected_fields[e.facet].indexOf(e.name)&&c.selected_fields[e.facet].push(e.name)}),c.sortBy&&"Most recent"==c.sortBy?(c.sort={},c.sort.order="desc",c.sort.field="postedDate"):c.sortBy&&"Most popular"==c.sortBy?(c.sort={},c.sort.order="desc",c.sort.field="mostpopular"):c.sortBy&&"Most relevant"==c.sortBy&&(c.sortBy=""),c.subsearch&&(c.subsearch=encodeURIComponent(c.subsearch)||""),n&&(c.pageIdentifier=n),s&&(c.locationData=s),c.rk&&(c.rkstatus=!0),a||this.commonService.clearDDO(l),this.isImSearch=this.commonService.getSiteSettings("isUseDefaultSearchForIm"),!c.siteType||"internal"!=c.siteType||this.ignoreInternalFlow?[3,2]:(t="refineSearchIM",[4,this.getImconfigurations(e,"getIMConfigurations")]);case 1:d=p.sent(),d&&d.imTenant&&(c.isInternal=d.imTenant),this.isImSearch?c.isInternal=!1:c.isInternal=!0,c.isInternal&&c.rk&&(c.rkstatus=!a),p.label=2;case 2:return this.eventAggregator.publish("searchInitiated",c),[2,new Promise(function(o,i){var a=h.commonService.getCachedDDO(l,e);if(c.siteType&&"internal"==c.siteType&&c.isInternal&&!h.ignoreInternalFlow)t="refineSearchIM",h.commonService.getDDO(e,"refineSearchIM",c).then(function(t){if(t.refineSearch.data&&!t.refineSearch.data.ui_selections&&(t.refineSearch.data.ui_selections={}),t.refineSearch.data&&t.refineSearch.data.ui_selections){if(c.selected_fields&&!c.selected_fields.visibilityType&&t.refineSearch.data.ui_selections.visibilityType&&t.refineSearch.data.ui_selections.visibilityType.length,t.refineSearch.data.ui_selections.visibilityType&&t.refineSearch.data.ui_selections.visibilityType.length){var i=t.refineSearch.data.ui_selections.visibilityType.findIndex(function(e){return"internal/external"==e.toLocaleLowerCase()||"external/internal"==e.toLocaleLowerCase()});-1!=i&&t.refineSearch.data.ui_selections.visibilityType.splice(i,1),c.imVariantsLength&&c.imVariantsLength<2&&(t.refineSearch.data.ui_selections.visibilityType=[])}t.refineSearch.selected_fields=t.refineSearch.data.ui_selections||c.selected_fields,c.selected_fields=t.refineSearch.selected_fields,o(t)}else h.eventAggregator.publish(h.commonService.getErrorChannel(e),{})});else if(a&&a.data&&a.data.jobs){var r={refineSearch:a};r.refineSearch.data&&r.refineSearch.data.ui_selections?(r.refineSearch.selected_fields=r.refineSearch.data.ui_selections,c.selected_fields=r.refineSearch.selected_fields):r.refineSearch.selected_fields=c.selected_fields,h.commonService.getDDO(e,"eagerLoadRefineSearchSession",c),o(r)}else c.isSliderEnable?(c.s="1",h.commonService.getDDO(e,l,c).then(function(t){t&&t.eagerLoadRefineSearch?(t={refineSearch:t.eagerLoadRefineSearch},t.refineSearch.data&&t.refineSearch.data.ui_selections?(t.refineSearch.selected_fields=t.refineSearch.data.ui_selections,c.selected_fields=t.refineSearch.selected_fields):t.refineSearch.selected_fields=c.selected_fields,o(t)):h.eventAggregator.publish(h.commonService.getErrorChannel(e),{}),h.commonService.getDDO(e,"eagerLoadRefineSearchSession",c)})):c.rk||c.ak?(c.s="1",h.commonService.getDDO(e,l,c).then(function(t){t&&t.eagerLoadRefineSearch?(t={refineSearch:t.eagerLoadRefineSearch},t.refineSearch.data&&t.refineSearch.data.ui_selections?(t.refineSearch.selected_fields=t.refineSearch.data.ui_selections,c.selected_fields=t.refineSearch.selected_fields):t.refineSearch.selected_fields=c.selected_fields,o(t)):h.eventAggregator.publish(h.commonService.getErrorChannel(e),{}),h.commonService.getDDO(e,"eagerLoadRefineSearchSession",c)})):(h.commonService.getDDO(e,"eagerLoadRefineSearchSession",c),h.commonService.getDDO(e,t,c).then(function(t){t&&t.refineSearch?(t.refineSearch.selected_fields=t.refineSearch.ui_selections||c.selected_fields,o(t)):h.eventAggregator.publish(h.commonService.getErrorChannel(e),{})}))})]}})})},e.prototype.getLocations=function(e,t,o){if(o){var i={};return i.keywords=o,this.commonService.getDDO(e,t,i).then(function(e){return e[t]})}},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.getImconfigurations=function(e,t){return this.commonService.getDDO(e,t,{}).then(function(e){return e[t]&&e[t].data?e[t].data:e[t]})},e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==a.CommonService&&a.CommonService)&&t||Object,i.EventAggregator])],e);var t}();t.FacetsService=r}),define("v1/field-glocation-handler",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="glocations",i={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},a=function(){function e(e,t,i,a,r,n){this.fields={},this.fieldType=o,this.activeIndex=-1,this.elementTag=e,this.element=r,this.fields=t,this.facetsService=i,this.a11yAutoComplete=a,this.facetContext=n}return e.prototype.onFocus=function(e){this.fields.glocations&&this.fields.glocations.value&&this.fields.glocations.results&&this.fields.glocations.results.length&&(this.fields.glocations.showListBox=!0,this.activeIndex=-1)},e.prototype.onKeyup=function(e){var t=e.target;if(t&&this.fields[o]){switch(e.which||e.keyCode){case i.UP:case i.DOWN:case i.RETURN:case i.ESC:return void e.preventDefault()}var a=t.value;a&&a.length?this.fetchGLocations():this.fields.glocations.showListBox=!1}},e.prototype.onPaste=function(e){var t=e.target,o=t.value;o&&o.length?this.fetchGLocations():this.fields.glocations.showListBox=!1},e.prototype.autoFillValue=function(e,t,i){var a=this.fields[this.fieldType].results;this.fields[this.fieldType].showListBox&&a.length&&((this.fields[o].autoSuggestCompleteOnkeyUp||i)&&(this.fields[this.fieldType].value=a[this.fields[this.fieldType].activeIndex].key,this.facetContext.setLocation(a[this.fields[this.fieldType].activeIndex])),i&&(this.fields[this.fieldType].results=[a[this.fields[this.fieldType].activeIndex]]),this.fields[this.fieldType].showListBox=t)},e.prototype.onEnter=function(e){-1!=this.activeIndex&&this.autoFillValue(e,!1,!0)},e.prototype.onKeydown=function(e){var t=e.target;if(t&&this.fields[o])switch(e.which||e.keyCode){case i.DOWN:this.moveDown(t);break;case i.UP:this.moveUp(t);break;case i.RETURN:return void this.onEnter(t)}},e.prototype.moveDown=function(e){if(this.fields[this.fieldType].showListBox){var t=this.fields[this.fieldType].results;t.length&&(++this.activeIndex,this.fields[this.fieldType].activeIndex>-1&&(t[this.fields[this.fieldType].activeIndex].aria={}),this.activeIndex>=t.length&&(this.activeIndex=0),this.a11yAutoComplete&&this.a11yAutoComplete.moveDown&&(this.a11yAutoComplete.moveDown(this.fields,e,this.fieldType,t,this.activeIndex,this.element),this.autoFillValue(e,!0)))}},e.prototype.moveUp=function(e){if(this.fields[this.fieldType].showListBox){var t=this.fields[this.fieldType].results;t.length&&(--this.activeIndex,this.fields[this.fieldType].activeIndex>-1&&(t[this.fields[this.fieldType].activeIndex].aria={}),this.activeIndex<0&&(this.activeIndex=0),this.a11yAutoComplete&&this.a11yAutoComplete.moveDown&&(this.a11yAutoComplete.moveDown(this.fields,e,this.fieldType,t,this.activeIndex,this.element),this.autoFillValue(e,!0)))}},e.prototype.fetchGLocations=function(){var e=this;if(this.fields.glocations.results=[],this.fields.glocations.value.length){this.activeIndex=-1,this.fieldType=o;var t={};t.locationValue=this.fields.glocations.value;var i=this.fields.glocations.value;this.fields.condition&&this.fields.condition.length&&(t.condition=this.fields.condition),this.facetsService.getLocations(this.elementTag,this.fields.glocations.ddoKey,i).then(function(t){e.fields.glocations.results=t.predictions,e.fields.glocations.results&&e.fields.glocations.results.length&&(e.fields.glocations.showListBox=!0)},function(e){new Error(e)})}},e}();t.GLocationHandler=a}),define("v1/ph-facets-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"refineSearch",ddoPlaceAutoComplete:"placeAutoComplete",ddoKeyAdd:"addToCartV2",ddoKeyDelete:"deleteFromCartV2",ddoKeyStatus:"getJobStatus",ddoKeyStatusList:"getJobStatusListV2",ddoKeyEagerLoad:"eagerLoadRefineSearch",ddokeyRefineSearchIM:"refineSearchIM",imVariantsConfigInfo:"imVariantsConfigInfo"},fields:{locations:{field:"locations",ddoKey:"locations",autoSuggestOnfocus:!0,autoSuggestCompleteOnkeyUp:!0,autoPopulateOnBlur:!0,autoSuggestOnfocusDdoKey:"",results:[],showListBox:!1,activeIndex:-1},glocations:{field:"glocations",ddoKey:"placeAutoComplete",autoSuggestOnfocus:!1,autoSuggestCompleteOnkeyUp:!1,autoSuggestOnfocusDdoKey:"",results:[],showListBox:!1,activeIndex:-1}},modeConfig:{"facet-locations":{fields:["glocations"]}}}});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}
;return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function n(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(n,s)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(n=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(n=c.trys,!(n=n.length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){c.label=o[1];break}if(6===o[0]&&c.label<n[1]){c.label=n[1],n=o;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(o);break}n[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{a=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,n,s,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-facets",["require","exports","aurelia-framework","aurelia-event-aggregator","ph-common","./ph-facets-config","./ph-facets-service","./field-glocation-handler"],function(e,t,o,i,a,r,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="ph-facets-v1",l="eager",d=function(e){function t(t,o,i,r,n,s,d,h){var p=e.call(this,t,o,c)||this;return p.element=t,p.commonService=o,p.facetsService=i,p.localStorage=r,p.cookieManager=n,p.a11yAutoComplete=s,p.geoLocationService=d,p.eventAggregator=h,p.searchParams={sortBy:"",subsearch:"",from:0},p.searchFacets={},p.searchFacetKeys=[],p.searchSelections={},p.searchSelectionKeys=[],p.tempSearchSelectionKeys=[],p.jobResults=[],p.aggregations=[],p.sortFilter=!1,p.tempJobResultsForLazyLoad=[],p.triggerSpellCheck=!0,p.spellCheckObject={},p.searchConfigData={},p.pageResults=[],p.pages=1,p.pageSize=10,p.paginationBlockSize=10,p.paginationRange=[],p.totalJobs=0,p.filteredTotalJobs=0,p.currentSelectedPage=1,p.startingJobNumberInPage=1,p.endingJobNumberInpage=1,p.prevButtonVisibility=!0,p.nextButtonVisibility=!0,p.jobsViewed=[],p.jobsViewedFlag=!0,p.firstTime=!1,p.allResults=!1,p.isAccessbility=!1,p.showErrorMsg=!1,p.bulkcart=!1,p.clickTojd=!1,p.loadType=l,p.facetsToEnable=[],p.facetDisplayNames={},p.facetPlaceholderNames={},p.defaultFacetsToOpen=[],p.openFacets=[],p.personalizedData=[],p.showMultiLocationInlineView=!1,p.locationSliderFacet=!1,p.sliderRadius=305,p.placeVal="",p.showLocationDropdown=!0,p.locationSliderMode=!1,p.locationRangeEnd=300,p.locationSliderFacetMaxRange=300,p.locationSliderFacetUnbounded=!0,p.aboveMaxRadius=!0,p.location="",p.workLocation="",p.enableLocationSlider=!0,p.subscriptions=[],p.selectedSkill=[],p.skills=[],p.bodyClass="",p.clearResults="",p.sort="",p.onlyCounts=0,p.isCritical=!1,p.clearAll=!1,p.facetSelectionCounts={},p.lastSelection={},p.inputFields={},p.fieldsEnabled=[],p.fields={},p.noResults=!1,p.resultsUpdated=!1,p.resultsDisplayMode="",p.facetResultsUpdated=!1,p.isRequestInProgress=!1,p.searchFacetsIM={},p.facetsMetaDataIM={count:{},index:{},filterKey:{},size:300},p.locationUnit="miles",p.locationUnitList=[{value:"miles"},{value:"kilometers"}],p.islocationUnitDropdown=!1,p.isShowLocationDropdown=!0,p.markerFacet={},p.ignoreInternalFlow=!1,p.isWorksiteInfo=!1,p.handleFieldFocus=function(e){var t=e.target;if(t){var o=p.getFieldName(t),i=p.getFieldHandler(o);i&&i.onFocus&&i.onFocus(e),p.resetFieldListBox(o),p.autoPopulateOnBlur(o),p.setActiveField(o)}},p.locationBlur=function(e){var t=e.target;if(t){var o=p.getFieldName(t);setTimeout(function(){p.fields[o].showListBox=!1},250)}},p.handleKeyup=function(e){var t=e.target;if(t){var o=p.getFieldName(t),i=p.getFieldHandler(o);i&&i.onKeyup&&i.onKeyup(e),27==e.which&&p.resetFieldListBox()}},p.handleKeydown=function(e){var t=e.target;if(t){var o=p.getFieldName(t),i=p.getFieldHandler(o);i&&i.onKeydown&&i.onKeydown(e)}},p.handlepaste=function(e){var t=e.target;if(t){var o=p.getFieldName(t),i=p.getFieldHandler(o);i&&i.onPaste&&setTimeout(function(){i.onPaste(e)},0)}},p.addJobContext=function(){p.commonService.addJobContext(c,p.jobResults),p.commonService.jobContext(c)},p.getDataCount=function(){return p.totalJobs?p.totalJobs:0},p.widgetViewType=e.prototype.getQueryParam.call(p,"m"),p.searchKeyword=e.prototype.getSearchKeyword.call(p),p.queryCity=e.prototype.getQueryParam.call(p,"qcity"),p.queryState=e.prototype.getQueryParam.call(p,"qstate"),p.queryCountry=e.prototype.getQueryParam.call(p,"qcountry"),p.placeId=e.prototype.getQueryParam.call(p,"p"),p.locationKey=e.prototype.getQueryParam.call(p,"lk"),p.category=decodeURIComponent(e.prototype.getQueryParam.call(p,"c")||e.prototype.getQueryParam.call(p,"category")||""),p.subCategory=e.prototype.getQueryParam.call(p,"subCategory"),p.workLocation=e.prototype.getQueryParam.call(p,"workLocation"),p.latitude=e.prototype.getQueryParam.call(p,"latitude"),p.longitude=e.prototype.getQueryParam.call(p,"longitude"),p.rk=e.prototype.getQueryParam.call(p,"rk")||p.commonService.getSessionParam("rk"),p.ak=e.prototype.getQueryParam.call(p,"ak")||p.commonService.getSessionParam("ak"),p.sort=decodeURIComponent(e.prototype.getQueryParam.call(p,"sortBy")||""),p.triggerSpellCheck=e.prototype.getQueryParam.call(p,"triggerSpellCheck"),p.fields.glocations={},p.fields.glocations.value="",p.eventAggregator.subscribe("GeoLocation",function(e){a.logger.debug("payload location ::"+e),p.locationLatLongs=e}),p.eventAggregator.subscribe("GeoLocationDetails",function(e){a.logger.debug("payload location ::"+e),p.locationLatLongs=e}),p.geoLocationService.askForLocation(),p}return __extends(t,e),t.prototype.fetchBodyClass=function(){return this.bodyClass=document.body.className,this.bodyClass},t.prototype.shouldAddSessionParams=function(){var t=!1;return"1"==e.prototype.getQueryParam.call(this,"s")&&(t=!0),t},t.prototype.hasLocationSliderFacet=function(){return-1!=this.facetsToEnable.indexOf("phLocSlider")},t.prototype.created=function(){this.populateSelectedFields(),this.ignoreInternalFlow=this.commonService.getSiteSettings("ignoreInternalFlow"),this.localStorage.removeItem("sbts"),this.localStorage.getItem("jobsViewed")||this.localStorage.setItem("jobsViewed",[]);var e=this.commonService.getSiteSettings("refineSearch");e&&e.enabledFacets&&(this.facetsToEnable=e.enabledFacets,this.facetDisplayNames=e.facetDisplayNames,this.facetPlaceholderNames=e.facetPlaceholderNames,this.defaultFacetsToOpen=e.defaultFacetsToOpen),this.hasLocationSliderFacet()&&(e&&e.facetConfig&&(this.locationRangeEnd=e.facetConfig.phLocSlider.locationRangeEnd,this.sliderRadius=e.facetConfig.phLocSlider.sliderRadius,this.locationSliderFacetMaxRange=this.locationRangeEnd,this.aboveMaxRadius=e.facetConfig.phLocSlider.aboveMaxRadius,e.facetConfig.phLocSlider.sliderDelta,this.locationUnit=e.facetConfig.phLocSlider.LocationUnit||this.locationUnit),this.locationSliderFacetUnbounded&&(this.locationRangeEnd=this.locationRangeEnd+5)),this.handleEventSubscriptions()},t.prototype.detached=function(){this.subscriptions.forEach(function(e){e.dispose()})},t.prototype.handleEventSubscriptions=function(){var e=this;this.subscriptions.push(this.eventAggregator.subscribe("ph:clearSelection",function(t){t&&"phLocSlider"==t?e.clearSearchValue(t,"glocations"):e.clearSelection(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:resetAll",function(t){e.emptySelectionsAndCallSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:subSearchReset",function(t){e.clearSubSearchAndCallSearch(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:subSearch",function(t){e.searchParams.subsearch=t.subsearch,e.filterSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:sortBy",function(t){e.searchParams.sortBy=t.sortBy,e.sortfilterSearch()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:pullResults",function(t){e.raiseSearchResultsEvent()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:showfilter",function(t){e.facetFilter=t,e.showFacetFilter()})),this.subscriptions.push(this.eventAggregator.subscribe("ph:showMore",function(t){e.showMoreResults(t)})),this.subscriptions.push(this.eventAggregator.subscribe("selectFields",function(t){e.saveFacetSelection()})),this.subscriptions.push(this.eventAggregator.subscribe("selectedSkillField",function(t){e.handleSelectedSkills(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:gotoPageEvent",function(t){e.gotoPage(t)})),this.subscriptions.push(this.eventAggregator.subscribe("ph:marker",function(t){e.markerFacet=e.markerFacet||{},e.markerFacet.checked=!0,e.markerFacet.count=t.count,e.markerFacet.facet="city",e.markerFacet.name=t.city,e.filterChanged(e.markerFacet,"city")}))},t.prototype.handleSelectedSkills=function(e){var t=!1;this.searchKeyword.split(",");for(var o=0;o<e.length;o++)this.searchKeyword.indexOf(e[o])>-1&&(t=!0),t||(this.searchKeyword+=","+e[o]),t=!1;this.selectedSkill=e,this.searchData(1,"")},t.prototype.saveFacetSelection=function(){var e={};e.selected_fields={},this.searchSelectionKeys.forEach(function(t){e.selected_fields[t.facet]||(e.selected_fields[t.facet]=[]),-1==e.selected_fields[t.facet].indexOf(t.name)&&e.selected_fields[t.facet].push(t.name)}),e.all_fields=this.facetsToEnable,e.facetDisplayNames=this.facetDisplayNames,e.keywords=this.searchKeyword,e.subsearch=this.searchParams.subsearch;var t=this.commonService.getSiteSettings("refineSearch"),o=t&&t.facetConfig&&t.facetConfig.phLocSlider,i=this.rk;o&&(e.phLocSlider=o),i&&(e.rk=i),this.placeId&&(e.placeId=this.placeId,e.sliderRadius=this.sliderRadius,e.placeVal=this.placeVal);var a=Object.keys(e.selected_fields||{});e.isSearchRefined=!!(a.length||e.keywords||a.subsearch),this.eventAggregator.publish("saveSelections",e)},t.prototype.populateSelectedFields=function(t){if(this.searchParams.sortBy=this.commonService.getSessionParam("sortBy")||"",this.shouldAddSessionParams()){t=t||{};var o=t.locationData||this.commonService.getSessionParam("locationData");t=t.selected_fields||this.commonService.getSessionParam("selected_fields");var i={city:"qcity",state:"qstate",country:"qcountry"};i=this.addExtraSelectionsFromUrl(i,"key");for(var a in i)i.hasOwnProperty(a)&&!this[a]&&this.commonService.getSessionParam(i[a])&&(this[a]=this.commonService.getSessionParam(i[a]),this.existsInSession(a,this[a]));if(t){t=this.parseJsonStringToObj(t);for(var r in t)if(t.hasOwnProperty(r))for(var n=t[r],s=0;s<n.length;s++)this.existsInSession(r,n[s])}if(o&&Object.keys(o).length){o=this.parseJsonStringToObj(this.commonService.getSessionParam("locationData"));for(var a in o)o.hasOwnProperty(a)&&(this[a]||"boolean"==typeof this[a]||(this[a]=o[a],"place_id"==a&&(this.placeId=o[a])));o.hasOwnProperty("placeVal")&&(this.fields.glocations.value=o.placeVal),o.hasOwnProperty("sliderRadius")&&(this.sliderRadius=o.sliderRadius,this.aboveMaxRadius=o.aboveMaxRadius)}this.commonService.getSessionParam("subsearch")&&(this.searchParams.subsearch=decodeURIComponent(this.commonService.getSessionParam("subsearch"))||"");var c=e.prototype.getQueryParam.call(this,"from")||0;this.searchParams.from=parseInt(c),this.searchParams.from>0&&(this.currentSelectedPage=Math.ceil(this.searchParams.from/this.pageSize)+1)}},t.prototype.addExtraSelectionsFromUrl=function(t,o){for(var i,a,r=e.prototype.getQueryParamsMap.call(this),n=Object.keys(r),s=0;s<n.length;s++)n[s].startsWith("qk")&&(i=n[s].substr(2),a="key"==o?i:r[n[s]],t[i]=decodeURIComponent(a));return t},t.prototype.fetchLocationValue=function(){var t=decodeURIComponent(e.prototype.getQueryParam.call(this,this.locationType||"location")||"");"3"==this.widgetViewType?this.location=t:this.placeId&&this.placeId.trim().length?(this.locationSliderMode=!0,this.placeVal=t,this.fields.glocations.value=t,this.placeVal&&this.placeVal.trim().length&&(this.enableLocationSlider=!0)):this.city=t},t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.fetchLocationValue(),this.pageName=this.commonService.getPageName(),this.pageType=this.commonService.getPageType(),this.clearResults=this.clearResults||this.commonService.getSiteSettings("clearResults"),this.clearResults||(this.clearResults="full"),this.categoryNameInput=this.categoryNameInput||this.category;var o={city:this.city||this.queryCity||"",state:this.queryState||"",country:this.queryCountry||"",category:this.categoryNameInput||"",subCategory:this.subCategory||"",workLocation:this.workLocation||""};o=this.addExtraSelectionsFromUrl(o,"val"),"3"==this.widgetViewType&&(o.location=this.location||"");var i=e.prototype.getQueryParam.call(this,"s_s");if(i&&(this.searchParams.subsearch=i),"1"!=e.prototype.getQueryParam.call(this,"s"))for(var a in o)o.hasOwnProperty(a)&&this.existsInSession(a,o[a]);this.populateSelectedFields(),this.landingPageKey&&this.landingPageType&&this.landingPageKey.trim().length>0&&this.landingPageType.trim().length>0&&(this.pageIdentifier={landingPageType:this.landingPageType,landingPageKey:this.landingPageKey});var r=this.commonService.getParam("sessionParams");if(!(this.sort||r&&r.hasOwnProperty("sortBy"))){var n=this.commonService.getSiteSettings("refineSearch");n&&n.sort&&("object"==typeof n.sort?this.sort="Most recent":this.sort=n.sort||"Most relevant")}!this.sort||r&&r.hasOwnProperty("sortBy")||(this.searchParams.sortBy=this.sort),0!=this.onlyCounts&&(this.showJobs="false",this.showCounts="false"),this.showJobs&&"false"==this.showJobs?this.searchParams.jobs=!1:this.searchParams.jobs=!0,this.showCounts&&"false"==this.showCounts?this.searchParams.counts=!1:this.searchParams.counts=!0,"internal"!=this.commonService.getSiteType()||this.ignoreInternalFlow?this.searchData(this.currentSelectedPage,"",!0).then(function(){setTimeout(function(){t.raiseSearchResultsEvent()},500)}):this.getimVariantsConfigInfo()},t.prototype.getimVariantsConfigInfo=function(){return __awaiter(this,void 0,void 0,function(){var e,t,o,i,a,n;return __generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this.facetsService.getImconfigurations(c,"getIMConfigurations")];case 1:return e=s.sent(),e&&e.imTenant&&(this.isAccessbility=!0),[4,this.facetsService.makeDDORequest(c,r.WidgetConfig.v1.imVariantsConfigInfo,{})];case 2:return t=s.sent(),t.status&&"success"==t.status&&t.data&&t.data.values&&t.data.values.length&&-1!=(o=t.data.values.findIndex(function(e){return"jobs"==e.variant.toLowerCase()}))&&(i=t.data.values[o].types,a=void 0,i&&1==i.length&&(a="internal"==i[0]?"Internal":"External"),this.imVariantsLength=i&&i.length||0),this.searchData(this.currentSelectedPage,"",!0),[3,4];case 3:return n=s.sent(),console.log(n),[3,4];case 4:return[2]}})})},t.prototype.existsInSession=function(e,t){var o=!1;if(t.length>0){var i={facet:e,name:t};for(var a in this.searchSelectionKeys)if(this.searchSelectionKeys[a].facet==e&&this.searchSelectionKeys[a].name==t){o=!0;break}o||(this.searchSelectionKeys.push(i),this.updateFacetSelectionCounts(e))}},t.prototype.filterChanged=function(e,t){if(this.lastSelection={},this.lastSelection={facet:e,facetKey:t},e.checked){var o=this.commonService.getSiteSettings("refineSearch");if(o&&o.facetConfig){var i=o.facetConfig[t];if(i&&i.selectSingle)for(var a=0;a<this.searchSelectionKeys.length;a++)if(this.searchSelectionKeys[a].facet==t){this.searchSelectionKeys.splice(a,1),this.updateFacetSelectionCounts(t,{decrement:!0});break}}this.searchSelectionKeys.push(e),this.tempSearchSelectionKeys.push(e),this.updateFacetSelectionCounts(t)}else for(var r=e.name,a=0;a<this.searchSelectionKeys.length;a++)if(r==this.searchSelectionKeys[a].name&&this.searchSelectionKeys[a].facet==t){this.searchSelectionKeys.splice(a,1),this.updateFacetSelectionCounts(t,{decrement:!0});break}"accordion"==this.mode?this.openFacets[0]=e.facet:-1==this.openFacets.indexOf(e)&&this.openFacets.splice(this.openFacets.indexOf(e)),this.searchParams.from=0,this.searchData(1,e.facet);try{var n={};n.trait6=e.name,n.trait47=t||"",this.commonService.processTrackingEvent("refiner_search",void 0,n)}catch(e){}},t.prototype.filterSearch=function(e){this.searchData(1,""),this.focusSliderHandle(!1,!0);var t={};t.trait6=e||this.searchParams.subsearch,this.commonService.processTrackingEvent("results_search",void 0,t)},t.prototype.sortfilterSearch=function(){this.sortFilter=!0,this.searchData(1,"");var e={};e.trait61=this.searchParams.sortBy,this.commonService.processTrackingEvent("sort_by_click",void 0,e)},t.prototype.emptySearchData=function(){this.searchFacetKeys=[],this.searchFacets={},this.pageResults=[],this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0}),this.searchParams.from=0},t.prototype.emptySelectionsAndCallSearch=function(){a.logger.debug("Request received at emptySearchDataAndCallSearch"),this.locationSliderMode||(this.searchFacetKeys=[]),this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0}),this.searchParams.from=0;var e={queryCity:"qcity",queryState:"qstate",queryCountry:"qcountry"};e=this.addExtraSelectionsFromUrl(e,"key");for(var t in e)e.hasOwnProperty(t)&&this[t]&&(this.searchParams[e[t]]="");if("none"!=this.clearResults&&"keywords"!=this.clearResults&&(this.clearAll=!0,this.category="",this.location=""),"full"!=this.clearResults&&"keywords"!=this.clearResults||(this.clearAll=!0,this.searchKeyword=""),this.hasLocationSliderFacet()){this.fields.glocations.value="",this.fields.glocations.showListBox=!1,this.placeVal="",this.placeId="",this.showLocationDropdown=!1;var o=this.commonService.getSiteSettings("refineSearch");this.sliderRadius=o.facetConfig.phLocSlider.sliderRadius,this.locationSliderChanged(!0)}this.searchData(1,"")},t.prototype.gotoPage=function(e){e>0&&this.searchData(e,"")},t.prototype.searchData=function(t,o,i,a,n,s){var d=this;if(e.prototype.unhideLoader.call(this),this.eventAggregator.publish("ph:fetchingResults",{}),this.firstTime=i,this.resultsDisplayMode=s,this.searchParams.all_fields=this.facetsToEnable,this.searchParams.pageName=this.pageName,this.searchParams.pageType=this.pageType,this.searchParams.from=this.pageSize*(t-1),this.searchParams.size=this.pageSize,this.searchParams.rk=this.rk,this.searchParams.ak=this.ak,this.searchParams.clearAll=this.clearAll,this.searchParams.jdsource="facets",this.clearAll&&(this.searchParams.location=""),this.locationKey&&(this.searchParams.lk=this.locationKey),this.selectedSkill.length>0){var h={};h.skills=this.selectedSkill,this.searchParams.selected_suggestions=h}this.searchParams.isSliderEnable=this.hasLocationSliderFacet(),this.isCritical&&(this.searchParams.selected_fields={isCritical:["true"]});var p;this.placeId?(p={place_id:this.placeId,sliderRadius:this.sliderRadius,aboveMaxRadius:this.aboveMaxRadius,LocationUnit:this.locationUnit,placeVal:this.isAccessbility?this.fields.glocations.value:this.placeVal},this.locationLatLongs&&this.locationLatLongs.coords?(p.latitude=this.locationLatLongs.coords.latitude,p.longitude=this.locationLatLongs.coords.longitude):this.latitude&&this.longitude&&(p.latitude=this.latitude,p.longitude=this.longitude)):this.hasLocationSliderFacet()&&(p={sliderRadius:this.sliderRadius,aboveMaxRadius:this.aboveMaxRadius,LocationUnit:this.locationUnit});var u="ddoKey";return this.rk&&this.searchParams.rk&&this.clearAll&&(u="ddoKeyEagerLoad"),this.commonService.getPageId()&&(this.searchParams.pageId=this.commonService.getPageId()),this.searchParams.siteType=this.commonService.getSiteType(),this.searchParams.forceSpellCheck=this.triggerSpellCheck,"internal"==this.searchParams.siteType&&this.imVariantsLength&&!this.ignoreInternalFlow&&(this.searchParams.imVariantsLength=this.imVariantsLength),this.facetsService.getSearchData(c,r.WidgetConfig.v1[u],this.searchSelectionKeys,this.searchParams,this.firstTime,this.searchKeyword,this.pageIdentifier,p).then(function(t){d.locationSliderMode||(d.searchFacetKeys=[]),setTimeout(function(){d.scrollToSelection()},250);var s=t.refineSearch,h=s&&s.data&&s.data.jobs||[],p=s&&s.data&&s.data.spellCheckData||{},g=s&&s.data&&s.data.searchConfig||{};s&&s.allResults?d.allResults=s.allResults:d.allResults=!1;var f=".ph-a11y-noresult";h.length?(f=".ph-a11y-result-updated","ddoKey"==u&&(d.resultsUpdated=!0,setTimeout(function(){d.resultsUpdated=!1},1e3))):"ddoKey"==u&&(d.noResults=!0,setTimeout(function(){d.noResults=!1},500));var y=d.element.querySelector(f),m=y&&y.parentElement;if(m&&(y.removeAttribute("aria-hidden"),y.parentElement.removeChild(y),setTimeout(function(){m.append(y),setTimeout(function(){y.setAttribute("aria-hidden","true")},3e3)},100)),d.firstTime&&s.totalHits&&s.totalHits<=d.searchParams.from)return d.commonService.setPageState("results"),d.searchData(1,"",!0),!1;if(s.data&&s.data.searchConfig&&s.data.searchConfig.mostpopular&&(d.searchParams.isMostPopular=!0),s.data&&s.data.personalizedData&&(d.personalizedData=Object.keys(s.data.personalizedData).reduce(function(e,t){var o={};return o.displayName=t,o.data=s.data.personalizedData[t],e.push(o),e},[]),console.info("personalied data",d.personalizedData)),s.data&&s.data.searchConfig&&s.data.searchConfig.isPersonalizedSearchEnabled&&(d.searchParams.isPersonalizedSearchEnabled=!0),d.searchParams.sortBy.length&&"Most relevant"!=d.searchParams.sortBy&&(d.personalizedData=[]),h&&h.length>d.pageSize){var v=d.pageSize?d.pageSize:h.length;h.splice(v)}s.data&&(d.uiSkillSelection=s.data.ui_skills_selection||"");var b=s.data.locationData;if(s.data&&b&&Object.keys(b).length)for(var S in b)b.hasOwnProperty(S)&&(d[S]=b[S],"place_id"==S?d.placeId=b[S]:"aboveMaxRadius"==S&&"false"==b[S]?d.aboveMaxRadius=!1:"locationRangeEnd"==S&&(d.locationRangeEnd=d.locationRangeEnd+5));if(d.placeVal&&d.placeVal.trim().length&&(d.enableLocationSlider=!0,d.aboveMaxRadius=!1,d.sliderRadius>d.locationSliderFacetMaxRange&&(d.aboveMaxRadius=!0)),d.loadType==l||""==o?(d.jobResults=h,d.aggregations=s.data.aggregations,d.totalJobs=s.totalHits||0,d.filteredTotalJobs=s.totalHits||0,d.spellCheckObject=p,d.searchConfigData=g,d.tempJobResultsForLazyLoad=h):"lazy"==d.loadType&&(d.tempJobResultsForLazyLoad=h,d.filteredTotalJobs=s.totalHits||0),s.selected_fields&&(d.searchSelectionKeys=[],d.updateFacetSelectionCounts(void 0,{reset:!0}),d.isCritical&&s.selected_fields.isCritical&&delete s.selected_fields.isCritical),(!d.searchSelectionKeys||!d.searchSelectionKeys.length)&&s.selected_fields){var _=s.selected_fields,w=s.data.aggregations;w&&w.length&&w.forEach(function(e){var t=_[e.field];if(t)for(var o in e.value)if(e.value.hasOwnProperty(o)){var i=e.value[o];if(!i){var a=t.indexOf(o);-1!=a&&d.updateFacetSelectionCounts(e.field,{decrement:!0})}}});for(var S in _)!function(e){_[e]&&_[e].length&&_[e].forEach(function(t){d.searchSelectionKeys.push({facet:e,name:t}),d.updateFacetSelectionCounts(e)})}(S)}if(d.commonService.populateJobResults&&(d.jobResults=d.commonService.populateJobResults(d.jobResults,d.clickTojd,"job_click")),d.raiseSearchResultsEvent(),d.raiseSkillsResultsEvent(s.data),e.prototype.raiseDataFetchEvent&&setTimeout(function(){e.prototype.raiseDataFetchEvent.call(d)},250),d.bulkcart&&!d.commonService.isCrawlerUserAgent()){for(var k=[],C=0,P=h;C<P.length;C++){var x=P[C];h.isJobSaved=null,h.saveJobInterState=null,h.inProgress=!1,k.push(x.jobSeqNo)}var j={jobSeqNos:k};d.facetsService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyStatusList,j).then(function(e){if(e&&e.data)for(var t=e.data,o=0,i=h;o<i.length;o++){var a=i[o];a.isJobSaved=t[a.jobSeqNo]||!1,a.saveJobInterState=t[a.jobSeqNo]||!1}})}if(s&&s.data&&s.data.aggregations){var w=s.data.aggregations,O=s.selected_fields,R=d.parseJsonStringToObj(d.commonService.getSessionParam("selected_fields"));i&&R&&Object.keys(R).length&&(O=R),w.forEach(function(e){d.searchFacets[e.field]=[];var t={key:e.field,visible:!1};o==e.field&&(t.visible=!0);var a=!1;for(var r in e.value)if(e.value.hasOwnProperty(r)&&e.value[r]){var n=!1;O[e.field]&&-1!=O[e.field].indexOf(r)&&(n=!0,t.visible=!0,a=!0),d.searchFacets[e.field].push({name:r,checked:n,count:e.value[r],facet:e.field})}i&&a&&d.defaultFacetsToOpen.push(e.field)});for(var E in d.searchFacets)d.facetsMetaDataIM.count[E]=d.searchFacets[E].length,d.facetsMetaDataIM.index[E]||(d.facetsMetaDataIM.index[E]=0),d.facetsMetaDataIM.filterKey[E]||(d.facetsMetaDataIM.filterKey[E]=""),d.searchFacetsIM[E]=d.searchFacets[E].slice(0,d.facetsMetaDataIM.index[E]+d.facetsMetaDataIM.size),d.handleFacetSearch(E,d.facetsMetaDataIM.filterKey[E],"name")}if(!i&&d.locationSliderMode||d.facetsToEnable&&d.facetsToEnable.forEach(function(e){var t={key:e,visible:!1};o==e&&(t.visible=!0),d.searchFacetKeys.push(t),d.isAccessbility&&d.locationDropDownFun()}),i){d.openSpecificFacets(d.defaultFacetsToOpen),d.fields.glocations&&d.fields.glocations.value&&(d.placeVal=d.fields.glocations.value);var D={};D.searchKeyword=d.searchKeyword,D.placeVal=d.placeVal,D.category=d.category,D.city=d.city,d.showErrorMsg=!1,d.totalJobs?d.commonService.setPageState("results"):(d.hasLocationSliderFacet()||d.eventAggregator.publish("ph:noJobsFound",D),d.hasLocationSliderFacet()||d.commonService.setPageState("no-results"),d.commonService.setPageStateData(D),d.isErrorMsgReqd?d.showErrorMsg=!0:d.hasLocationSliderFacet()?d.enableLocationSlider=!0:e.prototype.hideContainer.call(d))}else d.openSpecificFacets(d.openFacets);a&&d.focusSliderHandle(n),i&&void 0!=p&&void 0!=p.spellCheckApplied&&p.spellCheckApplied&&e.prototype.trackWidgetClick.call(d,"search_with_spellcheck",s.data),d.sortFilter=!1})},t.prototype.updateFacetsResults=function(){var e=this;this.facetResultsUpdated=!0,setTimeout(function(){e.facetResultsUpdated=!1},100)},t.prototype.locationDropDownFun=function(){var e=this;this.setFieldData(),this.fieldsEnabled=r.WidgetConfig.modeConfig["facet-locations"].fields,setTimeout(function(){var t=e.element.querySelectorAll(".ph-autocomplete-input-wrapper");if(t)for(var o=0;o<t.length;o++){var i=t[o];i&&e.a11yAutoComplete&&e.a11yAutoComplete.init&&e.a11yAutoComplete.init(i)}var a=e.element.querySelectorAll("[data-ph-autocomplete-input]");if(a)for(var o=0;o<a.length;o++){var r=a[o],n=e.getFieldName(r);e.inputFields[n]={field:r,handler:e.setHandler(n)},e.setupEventListeners(r)}},10)},t.prototype.setActiveField=function(e){this.activeField=e},t.prototype.setFieldData=function(){for(var e=r.WidgetConfig,t=e.modeConfig["facet-locations"].fields,o=0;o<t.length;o++){var i=t[o],a=e.fields[i],n=a.field||i;a&&a.autoSuggestField&&e.modeConfig["facet-locations"].fields.push(a.autoSuggestField);for(var s in a)a.hasOwnProperty(s)&&(this.fields[n]=this.fields[n]||{},this.fields[n][s]=a[s])}},t.prototype.setHandler=function(e){switch(e){case"glocations":return new s.GLocationHandler(c,this.fields,this.facetsService,this.a11yAutoComplete,this.element,this);default:return}},t.prototype.getFieldName=function(e){if(e&&e.getAttribute)return e.getAttribute("data-ph-autocomplete-input")},t.prototype.getFieldHandler=function(e){if(e){var t=this.inputFields[e];if(t&&t.handler)return t.handler}},t.prototype.autoPopulateOnBlur=function(e){this.activeField&&this.activeField!=e&&this.fields[this.activeField].autoPopulateOnBlur&&this.fields[this.activeField].value&&(this.fields[this.activeField].value=this.fields[this.activeField].results[0].key,this.fields[this.activeField].results=[this.fields[this.activeField].results[0]])},t.prototype.clearSearchValue=function(e,t){var o=this;this.fields[t].value="",this.fields[t].showListBox=!1,this.clearPlaceVal(),setTimeout(function(){o.inputFields[t].field.focus()},100)},t.prototype.isFieldEnabled=function(e){return-1!=this.fieldsEnabled.indexOf(e)},t.prototype.resetFieldListBox=function(e){var t=this,o=r.WidgetConfig;o.modeConfig["facet-locations"].fields.forEach(function(i){var a=t.fields[i]||t.fields[o.fields[i].field];a&&i!=e&&(a.showListBox=!1)})},t.prototype.setupEventListeners=function(e){e&&(e.addEventListener("focus",this.handleFieldFocus),e.addEventListener("keyup",this.handleKeyup),e.addEventListener("keydown",this.handleKeydown),e.addEventListener("paste",this.handlepaste),e.addEventListener("blur",this.locationBlur))},t.prototype.handleDoneButtonClick=function(){if("lazy"==this.loadType){this.jobResults=this.tempJobResultsForLazyLoad,this.totalJobs=this.filteredTotalJobs,this.tempSearchSelectionKeys=[],this.raiseSearchResultsEvent(),this.resetFacetFilter(),e.prototype.closeDialogPopup.call(this);var t=this.facetFilter.querySelector(".ph-a11y-row");t&&t.removeAttribute("aria-hidden")}},t.prototype.clearSelection=function(e){e&&(e.checked=!1,this.filterChanged(e,e.facet))},t.prototype.parseJsonStringToObj=function(e){return e&&"string"==typeof e&&(e=JSON.parse(e)),e},t.prototype.clearPlaceVal=function(){this.placeVal="",this.placeId="",this.showLocationDropdown=!1;var e=this.commonService.getSiteSettings("refineSearch");this.sliderRadius=e.facetConfig.phLocSlider.sliderRadius,this.locationSliderChanged(!0),this.searchData(1,"")},t.prototype.resetAllSelections=function(){var e=this;this.searchSelectionKeys.forEach(function(t){var o=e.searchFacets[t.facet];-1!=o.indexOf(t)&&(o[o.indexOf(t)].checked=!1)}),this.searchSelectionKeys=[],this.updateFacetSelectionCounts(void 0,{reset:!0})},t.prototype.showMoreResults=function(e){this.searchData(e.pageNumber,"",!1,!1,!1,e.resultsDisplayMode)},t.prototype.showFacetFilter=function(){var t=this;document.body.className=this.fetchBodyClass()+" facete",this.loadType="lazy",this.tempSearchSelectionKeys.length&&this.tempSearchSelectionKeys.forEach(function(e){t.searchSelectionKeys.push(e)});var o=this.element.parentElement.parentElement;o.classList.contains("ph-a11y-facets")||o.classList.add("ph-a11y-facets"),o.setAttribute("role","dialog");var i=this.facetFilter.querySelector(".ph-a11y-row");i&&i.setAttribute("aria-hidden",!0),setTimeout(function(){var i=t.facetFilter.querySelector(".ph-a11y-filter a"),a=o.querySelector(".ph-a11y-facets a");i||(i=t.facetFilter),e.prototype.openDialogPopup.call(t,o,i,a),t.showlocationFilterOnmobileToggle()},50),this.searchFacetKeys.forEach(function(e){e.visible=!1})},t.prototype.showlocationFilterOnmobileToggle=function(){var e=this;this.hasLocationSliderFacet()&&(this.isShowLocationDropdown=!1,setTimeout(function(){e.isShowLocationDropdown=!0},0))},t.prototype.resetFacetFilter=function(){var e=this.fetchBodyClass()||"";document.body.className=e.replace(" facete",""),this.loadType=l},t.prototype.hideFacetFilter=function(){if(this.tempSearchSelectionKeys.length)for(var t=this.tempSearchSelectionKeys.length,o=this.searchSelectionKeys.length,i=0;i<t;i++)for(var a=0;a<o;a++)this.tempSearchSelectionKeys[i].name==this.searchSelectionKeys[a].name&&(this.searchSelectionKeys.splice(a,1),o=this.searchSelectionKeys.length);this.resetFacetFilter(),e.prototype.closeDialogPopup.call(this);var r=this.facetFilter.querySelector(".ph-a11y-row");r&&r.removeAttribute("aria-hidden")},t.prototype.adjustAccordian=function(e){if(this.mode){
if("accordion"==this.mode)for(var t=this.searchFacetKeys[e].key,o=0;o<this.searchFacetKeys.length;o++)this.searchFacetKeys[o].key==t?this.searchFacetKeys[o].visible=!this.searchFacetKeys[o].visible:this.searchFacetKeys[o].visible=!1}else{this.searchFacetKeys[e].visible=!this.searchFacetKeys[e].visible;var i=this.facetsToEnable.indexOf("phLocSlider");-1!==i&&i!==e&&(this.searchFacetKeys[i].visible=!1)}},t.prototype.onJobClicked=function(){return this.localStorage.setItem("sbts",{sbts:1}),!0},t.prototype.clearSubSearchAndCallSearch=function(e){this.searchParams.subsearch="",this.filterSearch(e)},t.prototype.openSpecificFacets=function(e){if(e&&e.length>0)if("accordion"==this.mode){for(var t=0;t<this.searchFacetKeys.length;t++)if(this.searchFacetKeys[t].key==e[0]){this.searchFacetKeys[t].visible=!0;break}}else for(var t=0;t<this.searchFacetKeys.length;t++)e.indexOf(this.searchFacetKeys[t].key)>-1&&(this.searchFacetKeys[t].visible=!0)},t.prototype.hasSplRendering=function(e){return"phLocSlider"==e},t.prototype.locationSliderChanged=function(e){var t=this;setTimeout(function(){t.sliderRadius>t.locationSliderFacetMaxRange?t.aboveMaxRadius=!0:t.aboveMaxRadius=!1,t.searchData(1,"",void 0,!0,e)},0)},t.prototype.focusSliderHandle=function(e,t){var o=this;setTimeout(function(){var i=o.element.querySelector(".noUi-handle");if(e){var a=o.element.querySelector(".ph-a11y-search-location-box");a&&setTimeout(function(){a.focus()},700),o.inputFields.glocations&&o.inputFields.glocations.field&&setTimeout(function(){o.inputFields.glocations.field.focus()},700)}else t||(i?i.focus():o.focusSliderHandle(!1))},0)},t.prototype.fetchLocations=function(e){var t=this;if(this.currentfocusElem=e.target,40!=e.which&&16!=e.which&&9!=e.which){var o=e.target?e.target.value:void 0;o?this.facetsService.getLocations(c,r.WidgetConfig.v1.ddoPlaceAutoComplete,o).then(function(e){t.showLocationDropdown=!0,t.allLocations=e.predictions;var o=t.element.querySelector(".ph-ally-location-inner-search"),i=t.element.querySelector(".ph-a11y-search-location-box");t.element.querySelectorAll(".phs-locations-suggested-list li"),!t.isAccessbility&&o&&i&&t.dropdownAccessbility(o,t.showLocationDropdown,".phs-locations-suggested-list li",i,"a")},function(e){new Error(e)}):this.clearPlaceVal()}},t.prototype.dropdownAccessbility=function(e,t,o,i,a){var r=this;if(e instanceof HTMLElement||(e=this.element.querySelector(e)),this.element.querySelectorAll(o).length,o.length,e){var n=-1;e.addEventListener("keyup",function(e){switch(e.which){case 40:n<r.element.querySelectorAll(o).length?n++:n=r.element.querySelectorAll(o).length;break;case 38:if(0==n&&i)return i.focus(),void(n=-1);n>=0?n--:n=0;break;default:return}if(t||(n=0),n<r.element.querySelectorAll(o).length&&!(n<0)){var s=void 0;r.element.querySelectorAll(o).length&&r.element.querySelectorAll(o)[n]&&(s=a?r.element.querySelectorAll(o)[n].querySelector("a"):r.element.querySelectorAll(o)[n]),s&&s.focus()}})}},t.prototype.clearInnerFacetSearch=function(e,t,o){e.target.parentElement,o.filterKey="",document.querySelector("#facetInput_"+t).focus()},t.prototype.sliderFocus=function(e){this.currentfocusElem=e.target},t.prototype.setLocation=function(e){var t=this;e&&(this.locationSliderMode=!0,this.placeVal=e.description,this.fields.glocations.value=e.description,this.enableLocationSlider=!0,this.placeId=e.place_id,this.showLocationDropdown=!1,this.searchData(1,""),setTimeout(function(){t.inputFields.glocations&&t.inputFields.glocations.field&&t.inputFields.glocations.field.focus()},100))},t.prototype.raiseSearchResultsEvent=function(){var e=this,t=0;Object.keys(this.facetSelectionCounts).forEach(function(o){t+=e.facetSelectionCounts[o]||0}),this.eventAggregator.publish("ph:searchResults",{jobResults:this.jobResults,aggregations:this.aggregations,totalJobs:this.totalJobs,searchSelectionKeys:this.searchSelectionKeys,searchParams:this.searchParams,searchKeyword:this.searchKeyword,locationKeyword:(this.locationKey&&this.locationKey.length)>0?this.locationKey:this.isAccessbility?this.fields.glocations.value:this.placeVal,pageSize:this.pageSize,selectedSkills:this.uiSkillSelection,allResults:this.allResults,clearResults:this.clearResults,clearAll:this.clearAll,spellCheckObject:this.spellCheckObject,searchConfigData:this.searchConfigData,triggerSpellCheck:this.triggerSpellCheck,isLocationSlider:this.hasLocationSliderFacet(),filterCount:t,resultsDisplayMode:this.resultsDisplayMode,sortFilter:this.sortFilter,locationData:{aboveMaxRadius:this.aboveMaxRadius,sliderRadius:this.sliderRadius,locationSliderFacetMaxRange:this.locationSliderFacetMaxRange,locationUnit:this.locationUnit,placeVal:this.isAccessbility?this.fields.glocations.value:this.placeVal}})},t.prototype.raiseSkillsResultsEvent=function(e){e&&e.suggestions&&e.suggestions.skills&&this.eventAggregator.publish("skillsResultsEvent",e.suggestions.skills)},t.prototype.handleSaveJob=function(e){this.bulkcart&&!e.inProgress&&(e.inProgress=!0,e.saveJobInterState?this.deleteJobFromCart(e):this.addToJobCart(e))},t.prototype.addToJobCart=function(e){var t=this,o={job:{title:e.title,jobSeqNo:e.jobSeqNo,location:e.location,type:e.type,shortDescription:e.descriptionTeaser,applyUrl:e.applyUrl,category:e.category,postedDate:e.postedDate,expiryDate:e.expiryDate,reqId:e.reqId,multi_location:e.multi_location}};this.facetsService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyAdd,o).then(function(o){if(e.inProgress=!1,"602"==o.status){var i={trait5:e.jobSeqNo,trait14:e.category};e.saveJobInterState=!0,t.eventAggregator.publish("jobCartCount","+1"),t.eventAggregator.publish("jobCartUpdatedCount",""),t.commonService.raiseCustomEvent&&t.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),t.commonService.processTrackingEvent("job_added_to_jobcart",void 0,i)}else e.isJobSaved=!1,e.saveJobInterState=!1,console.info("failed on jobsave: "+o.status)})},t.prototype.deleteJobFromCart=function(e){var t=this,o={jobSeqNo:e.jobSeqNo};this.facetsService.makeDDORequest(c,r.WidgetConfig.v1.ddoKeyDelete,o).then(function(o){if(e.inProgress=!1,"605"==o.status){var i={};e.isJobSaved=!1,e.saveJobInterState=!1,i.trait5=e.jobSeqNo,i.trait14=e.category,t.eventAggregator.publish("jobCartCount","-1"),t.eventAggregator.publish("jobCartUpdatedCount",""),t.commonService.raiseCustomEvent&&t.commonService.raiseCustomEvent("ph:ex:jobCartUpdatedCount",""),t.commonService.processTrackingEvent("job_unfavorited",void 0,i)}else e.isJobSaved=!0,e.saveJobInterState=!0,console.info("failed on deleteJobFromCart")})},t.prototype.updateFacetSelectionCounts=function(e,t){t&&t.reset&&(this.facetSelectionCounts={}),e&&(this.facetSelectionCounts=this.facetSelectionCounts||{},void 0==this.facetSelectionCounts[e]&&(this.facetSelectionCounts[e]=0),t&&t.decrement?this.facetSelectionCounts[e]=this.facetSelectionCounts[e]-1:this.facetSelectionCounts[e]=this.facetSelectionCounts[e]+1)},t.prototype.scrollToSelection=function(){if(this.lastSelection&&this.lastSelection.facet)for(var e=void 0,t=this.element.querySelectorAll('[data-ph-at-text="'+this.lastSelection.facet.name+'"]'),o=0;o<t.length;o++)if(e=t[o],this.currentfocusElem=e,e.focus(),e&&e.getAttribute&&e.getAttribute("data-ph-at-id")){var i=e.getAttribute("data-ph-at-id");if(i=="facet-"+this.lastSelection.facet.facet&&e&&e.scrollIntoView){e.scrollIntoView(!1),this.eventAggregator.publish("scrollToResults",{});break}}return!0},t.prototype.handleFacetSearch=function(e,t,o){if(this.searchFacets[e]&&this.searchFacets[e].length&&t&&t.trim().length>0){var i=this.searchFacets[e].filter(function(e){return!!e[o].toLowerCase().includes(t.toLowerCase())});this.searchFacetsIM[e]=i}else this.searchFacetsIM[e]=this.searchFacets[e].slice(0,this.facetsMetaDataIM.index[e]+this.facetsMetaDataIM.size)},t.prototype.clearFacetSearch=function(e,t){this.facetsMetaDataIM.filterKey[t]="",this.searchFacetsIM[e]=this.searchFacets[e].slice(0,this.facetsMetaDataIM.index[e]+this.facetsMetaDataIM.size)},t.prototype.handleYScroll=function(e,t){if(e.target){var o=e.target.scrollHeight;e.target.scrollTop+100<=o&&this.facetsMetaDataIM.count[t]>this.facetsMetaDataIM.index[t]+this.facetsMetaDataIM.size&&!this.isRequestInProgress&&this.loadMore(t)}},t.prototype.loadMore=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(o){return this.facetsMetaDataIM.index[e]+=this.facetsMetaDataIM.size,this.isRequestInProgress=!0,(t=this.searchFacetsIM[e]).push.apply(t,this.searchFacets[e].slice(this.facetsMetaDataIM.index[e],this.facetsMetaDataIM.index[e]+this.facetsMetaDataIM.size)),this.isRequestInProgress=!1,[2]})})},t.prototype.getFieldOptions=function(e){if("locationUnit"===e)return this.locationUnitList},t.prototype.setFieldValue=function(e,t,o){"locationUnit"===e&&this.locationUnitList.length&&this.locationUnitList[t]&&(this.locationUnit=this.locationUnitList[t].value,this.islocationUnitDropdown=!1)},t.prototype.getActiveIndex=function(e){return"locationUnit"===e&&this.locationUnitList.length?this.matchingIndex(this.locationUnitList,this.locationUnit):-1},t.prototype.matchingIndex=function(e,t){return e.findIndex(function(e){return e.value===t})},t.prototype.clearFieldValue=function(e){},t.prototype.worksiteInfo=function(e){this.isWorksiteInfo=1==e},__decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"pageSize",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"categoryNameInput",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"category",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"city",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isAccessbility",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"mode",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"bulkcart",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"clickTojd",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"loadType",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"landingPageKey",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"landingPageType",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"locationType",void 0),__decorate([o.bindable(),__metadata("design:type",Number)],t.prototype,"locationRangeEnd",void 0),__decorate([o.bindable(),__metadata("design:type",String)],t.prototype,"clearResults",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"sort",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showJobs",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"showCounts",void 0),__decorate([o.bindable(),__metadata("design:type",Object)],t.prototype,"onlyCounts",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isCritical",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"clearAll",void 0),t=__decorate([o.customElement(c),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(d=void 0!==a.CommonService&&a.CommonService)&&d||Object,n.FacetsService,"function"==typeof(h=void 0!==a.LocalStorageAPI&&a.LocalStorageAPI)&&h||Object,"function"==typeof(p=void 0!==a.CookieManager&&a.CookieManager)&&p||Object,"function"==typeof(u=void 0!==a.A11yAutoComplete&&a.A11yAutoComplete)&&u||Object,"function"==typeof(g=void 0!==a.GeoLocationService&&a.GeoLocationService)&&g||Object,i.EventAggregator])],t);var d,h,p,u,g}(a.PhenomWidget);t.Facets=d}),define("text!v1/ph-facets.html",["module"],function(e){e.exports='<template>\r\n\t<compose view.bind="tmplUrl" containerless>\r\n</template>'}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!0,testing:!0}}),define("v1/ph-create-job-alert-config",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetConfig={v1:{ddoKey:"jobAlertCreate",ddoKeyManage:"jobAlertManage",ddoKeyJobAlertList:"jobAlertList",ddoKeySocialProfile:"mergedProfile",ddoKeymasterFrequency:"masterFrequencyV1",ddoKeyValidateToken:"validateToken",ddoKeyValidateJwtToken:"validateJwtToken",ddoKeyATSProfileURL:"atsProfileURL",ddoKeyMergedProfile:"mergedProfile"}}}),define("v1/ph-create-job-alert-model",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.email="",this.jobSeqNo="",this.name="",this.frequency="2",this.displayFrequency="",this.userSubType=""}return e.prototype.resetData=function(){this.email="",this.jobSeqNo="",this.name="",this.frequency="2",this.displayFrequency="",this.userSubType=""},e}();t.CreateJobAlertModel=o});var __decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("v1/ph-create-job-alert-service",["require","exports","aurelia-framework","ph-common"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.commonService=e}e.prototype.getProfile=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})},e.prototype.makeDDORequest=function(e,t,o){return this.commonService.getDDO(e,t,o).then(function(e){return e[t]})};var t;return e=__decorate([o.autoinject(),__metadata("design:paramtypes",["function"==typeof(t=void 0!==i.CommonService&&i.CommonService)?t:Object])],e)}();t.CreateJobAlertService=a});var __extends=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))(function(a,r){function n(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new o(function(t){t(e.value)}).then(n,s)}c((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function o(e){return function(t){return i([e,t])}}function i(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(n=c.trys,!(n=n.length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){c.label=o[1];break}if(6===o[0]&&c.label<n[1]){c.label=n[1],n=o;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(o);break}n[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{a=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var a,r,n,s,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};define("v1/ph-create-job-alert",["require","exports","aurelia-framework","ph-common","./ph-create-job-alert-config","aurelia-event-aggregator","./ph-create-job-alert-service","./ph-create-job-alert-model"],function(e,t,o,i,a,r,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c="ph-create-job-alert-v1",l=function(e){function t(t,o,i,a,r){var n=e.call(this,t,o,c)||this;return n.element=t,n.commonService=o,n.createJobAlertService=i,n.createJobAlertModel=a,n.eventAggregator=r,n.isErrorMsgReqd=!1,n.validateDuplication={name:!0,selectedFields:!0,enable:!0},n.validateCreationLimit={count:10,enable:!0},n.hideIfNoEmail=!1,n.isLoggedIn=!1,n.showSuccessMsg=!1,n.isEmailReqd=!1,n.isDisabled=!1,n.requestInprogress=!1,n.errors={},n.showErrorMsg=!1,n.toggleJobAlert=!1,n.hideJobAlert=!0,n.facetObj={},n.userProfile={},n.handleAlertStatus=!1,n.popupAlert=!1,n.isIconVisible=!0,n.closeAlert=!1,n.manageAlertStatus=!1,n.a=!1,n.masterFrequency=[],n.frequencyObj={},n.isSearchDataUpdated=!1,n.isNonJwtTokenTenant=!1,n.aCreatedAlerts=[],n.createdAlertCount=0,n.errorState={},n.isLocalDataSourceFn=function(){return!0},n}__extends(t,e),t.prototype.attached=function(){var t=this;e.prototype.attached.call(this),this.getMasterFrequency(),this.isNonJwtTokenClient(),this.isNonJwtTokenTenant||this.getProfile(),this.isEmailReqd&&(this.getEmail(),this.validateJwtToken()),(this.validateDuplication.enable||this.validateCreationLimit.enable)&&this.getJobAlertList(),this.eventAggregator.subscribe("saveSelections",function(e){i.logger.debug("i can hear u too",JSON.stringify(e)),t.facetObj=e}),this.eventAggregator.subscribe("ph:data:updated:event",function(e){e.isDataUpdated&&t.notify()}),this.hideIfNoEmail&&this.profileEmailCheck()},t.prototype.notify=function(){this.eventAggregator.publish("ph:isUserLoggedIn",{isLoggedIn:this.isLoggedIn})},t.prototype.isNonJwtTokenClient=function(){if(this.commonService.getRefNum){var e=this.commonService.getSiteSettings("tokenConfiguredTenants"),t=this.commonService.getRefNum();e&&e.refNums&&e.refNums.length&&-1!=e.refNums.indexOf(t)?this.isNonJwtTokenTenant=!0:this.isNonJwtTokenTenant=!1}},t.prototype.getMasterFrequency=function(){var e=this;this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeymasterFrequency,{}).then(function(t){t&&"success"==t.status&&(e.masterFrequency=t.data)})},t.prototype.getProfile=function(){var t=this;e.prototype.unhideLoader.call(this),this.createJobAlertService.getProfile(c,a.WidgetConfig.v1.ddoKeySocialProfile,{}).then(function(o){o=o||{},o=o.profile||o,o.email&&(t.isLoggedIn=!0,t.isDisabled=!0,t.userProfile=o,t.createJobAlertModel.email=t.userProfile.email),t.notify(),e.prototype.hideLoader.call(t)})},t.prototype.editEmail=function(){this.isIconVisible=!1},t.prototype.profileEmailCheck=function(){var t=this;!function(){__awaiter(t,void 0,void 0,function(){var t;return __generator(this,function(o){switch(o.label){case 0:return[4,this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyMergedProfile)];case 1:return t=o.sent(),t&&t.email||e.prototype.hideContainer.call(this),[2]}})})}()},t.prototype.updateErrorState=function(){var e=this.errors||{},t=Object.keys(e),o=t.length;if(o>0)for(var i=0;i<o;i++){var a=e[t[i]];if(a){this.hasErrors=!0;break}}else this.hasErrors=!1;return this.hasErrors},t.prototype.validateName=function(){return this.resetErrors(),0==this.createJobAlertModel.name.length&&(this.errors.name="E103"),this.updateErrorState()},t.prototype.validateEmail=function(){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.createJobAlertModel.email?t.test(this.createJobAlertModel.email)||(this.errors.email="E102"):this.errors.email="E101",this.updateErrorState()?e.prototype.focusFormError.call(this):(this.handleAlertStatus=!0,delete this.errors.email,this.createJobAlert())},t.prototype.alertFrequency=function(){this.toggleJobAlert=!0},t.prototype.showMsg=function(){this.handleAlertStatus=!1,this.popupAlert=!0;var t=this.element.querySelector(".ph-a11y-manage-block"),o=this.element.querySelector(".ph-a11y-manage-modal-dialog a");e.prototype.openDialogPopup.call(this,"ph-a11y-manage-modal-dialog",t,o)},t.prototype.closeManageAlert=function(){this.popupAlert=!1,this.closeAlert=!1,this.handleAlertStatus=!0,e.prototype.closeDialogPopup.call(this)},t.prototype.createJobAlert=function(){var t=this;this.requestInprogress=!0;var o={};o.alertData=this.facetObj,o.frequency=this.createJobAlertModel.frequency,o.email=this.createJobAlertModel.email,this.createJobAlertModel.userSubType.length>0&&(o.userSubType=this.createJobAlertModel.userSubType),this.createJobAlertModel.name.length>0&&(o.name=this.createJobAlertModel.name),this.getFreqValue(),this.hasErrors||(e.prototype.unhideLoader.call(this),this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKey,o).then(function(o){if(e.prototype.hideLoader.call(t),o&&"success"==o.status){var i=o.data;200==i.status?(t.showSuccessMsg=!0,t.hideJobAlert=!1,t.requestInprogress=!1,i.data&&i.data.manageStatus&&(t.manageAlertStatus=i.data.manageStatus),t.createdAlertCount++):400==i.status&&i.message?t.showConsolidatedError("showservermessage",i.message):t.showConsolidatedError("oopserroroccurred"),e.prototype.focusElement.call(t,".ph-a11y-create-alert-submit",250)}else t.hideJobAlert=!0,t.hasErrors=!0,t.errors.email=null,e.prototype.focusFormError.call(t)},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError()}))},t.prototype.createAlert=function(){var t=this;this.eventAggregator.publish("selectFields",{});var o={};o.alertData=this.facetObj,o.frequency=this.createJobAlertModel.frequency,this.getFreqValue(),this.hasErrors||(e.prototype.unhideLoader.call(this),this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKey,o).then(function(o){if(e.prototype.hideLoader.call(t),o&&"success"==o.status){var i=o.data;200==i.status&&(t.showSuccessMsg=!0,t.hideJobAlert=!1,i.data&&i.data.manageStatus&&(t.manageAlertStatus=i.data.manageStatus))}},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError()}))},t.prototype.closeEmailAlert=function(){this.closeAlert=!1,this.popupAlert=!1},t.prototype.manageAlert=function(){var t=this;this.popupAlert=!1,this.closeAlert=!0,e.prototype.unhideLoader.call(this);var o={};o.email=this.createJobAlertModel.email,this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyManage,o).then(function(o){if(e.prototype.hideLoader.call(t),o&&"success"==o.status){o.data.status}var i=t.element.querySelector(".ph-a11y-manage-block"),a=t.element.querySelector(".ph-a11y-manage-modal-dialog-two");e.prototype.openDialogPopup.call(t,"ph-a11y-manage-modal-dialog-two",i,a)},function(o){new Error(o),e.prototype.hideLoader.call(t),t.handleError()})},t.prototype.createNewAlert=function(){var e=this;this.hideJobAlert=!0,this.showSuccessMsg=!1,this.validateCreationLimit.enable&&this.updateAlertCreationLimit(),this.createJobAlertModel.resetData(),setTimeout(function(){e.alertName.focus()},10)},t.prototype.getFrequencyObject=function(e){for(var t in this.masterFrequency)if(this.masterFrequency[t].key===e)return this.masterFrequency[t]},t.prototype.getFreqValue=function(){this.frequencyObj=this.getFrequencyObject(this.createJobAlertModel.frequency),this.frequencyObj&&(this.createJobAlertModel.displayFrequency=this.frequencyObj.literalkey)},t.prototype.handleError=function(){this.isErrorMsgReqd?this.showErrorMsg=!0:e.prototype.onError.call(this,"")},t.prototype.getLocalWidgetBundle=function(){return{frequencydaily:"Daily",frequencyweekly:"Weekly",frequencymonthly:"Monthly",frequencybiweekly:"Bi-Weekly"}},t.prototype.getEmail=function(){var e=this;"internal"==this.commonService.getSiteType()?this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyATSProfileURL).then(function(t){t&&"success"==t.status&&(e.isLoggedIn=!0,e.isDisabled=!0,e.createJobAlertModel.email=t.username||"",e.createJobAlertModel.name=t.firstName||"")},function(t){e.handleError()}):this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyValidateToken).then(function(t){t&&t.access_token&&(e.isLoggedIn=!0,e.isDisabled=!0,e.createJobAlertModel.email=t.user_name||"")},function(){e.handleError()})},t.prototype.validateJwtToken=function(){var e=this;"internal"==this.commonService.getSiteType()&&this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyValidateJwtToken).then(function(t){"success"==t.status&&t.data&&t.data.userSubType&&(e.createJobAlertModel.userSubType=t.data.userSubType)},function(e){new Error(e)})},t.prototype.getJobAlertList=function(){var e=this;this.createJobAlertService.makeDDORequest(c,a.WidgetConfig.v1.ddoKeyJobAlertList,{}).then(function(t){if("success"===t.status&&t.data){var o=t.data.jobAlerts||[];e.createdAlertCount=o.length,e.aCreatedAlerts=o,e.updateAlertCreationLimit()}})},t.prototype.hasDuplicateFacetSelection=function(){var e=this;try{return!!this.aCreatedAlerts.length&&this.aCreatedAlerts.some(function(t){return JSON.stringify(e.facetObj.selected_fields)===JSON.stringify(t.alertData.selected_fields)})}catch(e){return!1}},t.prototype.isAllFieldsSelected=function(){return this.facetObj.isSearchRefined},t.prototype.updateAlertCreationLimit=function(){this.createdAlertCount>=this.validateCreationLimit.count&&this.showConsolidatedError("maxalertsreached")},t.prototype.validateOnAlertCreation=function(e){e&&e.preventDefault(),this.eventAggregator.publish("selectFields",{}),this.resetErrors(),(!this.validateName()||this.requestInprogress)&&(this.validateDuplication.enable?this.isAllFieldsSelected()?this.createJobAlert():this.showConsolidatedError("selectedallfields"):this.createJobAlert())},t.prototype.showConsolidatedError=function(e,t){switch(void 0===t&&(t=""),e){case"selectedallfields":this.errors.name="E104";break;case"duplicatefacets":break;case"maxalertsreached":this.errors.name="E106";break;case"showservermessage":this.errors.name="E400",this.errors.message=t;break;case"oopserroroccurred":this.errors.name="E404"}this.updateErrorState()},t.prototype.resetErrors=function(){delete this.errors.name},t.prototype.resetCreateForm=function(){};var l;return __decorate([o.bindable({attribute:"view"}),__metadata("design:type",String)],t.prototype,"tmpl",void 0),__decorate([o.bindable,__metadata("design:type",String)],t.prototype,"jobSeqNo",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isErrorMsgReqd",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"validateDuplication",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"validateCreationLimit",void 0),__decorate([o.bindable,__metadata("design:type",Object)],t.prototype,"hideIfNoEmail",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"isLoggedIn",void 0),__decorate([o.bindable,__metadata("design:type",Boolean)],t.prototype,"showSuccessMsg",void 0),__decorate([o.bindable(),__metadata("design:type",Boolean)],t.prototype,"isEmailReqd",void 0),t=__decorate([o.customElement(c),o.autoinject(),__metadata("design:paramtypes",[Element,"function"==typeof(l=void 0!==i.CommonService&&i.CommonService)?l:Object,n.CreateJobAlertService,s.CreateJobAlertModel,r.EventAggregator])],t)}(i.PhenomWidget);t.CreateJobAlert=l}),define("text!v1/ph-create-job-alert.html",["module"],function(e){e.exports='<template>\n\t<compose view.bind="tmplUrl" containerless>\n</template>'}),define("text!v1/views/ph-create-job-alert-v1/default/view.html",["module"],function(e){e.exports='<template>\r\n\t\x3c!-- view html here --\x3e\r\n\t<form role="form" submit.delegate="validateEmail()" show.bind="hideJobAlert">\r\n\t\t<div >\r\n\t\t\t<input type="text" placeholder="enter email" id="demo" value.bind="createJobAlertModel.email" >\r\n\t\t\t<a href="javascript:void(0)" mouseover.delegate="editEmail()" if.bind="isIconVisible===true" >icon</a>\r\n\t\t\t<span show.bind="hasErrors && errors.email == \'E101\'"><ppc-content> Email should not empty </ppc-content> </span>\r\n\t\t\t<span show.bind="hasErrors && errors.email == \'E102\'"><ppc-content> Please enter email </ppc-content> </span>\r\n\t\t\t<span show.bind="hasErrors && errors.email != \'E101\' && errors.email != \'E102\'"><ppc-content> Something went wrong. Please try again </ppc-content> </span>\r\n\t\t\t<a href="javascript:void(0)" click.delegate="alertFrequency()">alert preferences</a>\r\n\t\t\t<div show.bind="toggleJobAlert">\r\n\t\t\t\t<select id="frequency" value.bind="createJobAlertModel.frequency" data-ph-at-id="" role="combobox" key-role="comboRole" aria-label="Select an email frequency" key-aria-label="selectFreq" change.delegate="changeFreq()">\r\n\t\t\t\t\t<option value.bind="freq.key" role="option" key-role="optionRole" repeat.for="freq of masterFrequency">${widgetBundle[freq.literalkey] | pht}</option>\r\n\t\t\t\t</select>   \r\n\t\t\t\t<input type="checkbox">Remember my preference\r\n\t\t\t</div>\r\n\t\t\t<button type="submit"> Create job alert</button>\r\n\t\t</div>\r\n\t\t\r\n\t\t</form>\r\n\t\t<div show.bind="showSuccessMsg">\r\n\t\t\t<h3>Job alert created successfully</h3>\r\n\t\t\t<p>E-mail:${createJobAlertModel.email} </p>\r\n\t\t\t\x3c!-- <p>Alert Frequency:${createJobAlertModel.displayFrequency} </p> --\x3e\r\n\t\t\t<p>Alert Frequency:${widgetBundle[createJobAlertModel.displayFrequency] | pht}</p>\r\n\t\t\t<a href="createNewAlert()">Create another alert</a>\r\n\t\t\t<a href="javascript:void(0)" if.bind="!isLoggedIn && manageAlertStatus" click.delegate="showMsg()">Manage alert</a>\r\n\t\t</div>\r\n\t\t<div show.bind="popupAlert">\r\n\t\t   <h3>Manage Job Alerts<a href="javascript:void(0)" click.delegate="closeManageAlert()"> close</a></h3>\r\n\t\t\t  <p>To manage your alerts,<a> sign-in</a> to career site using your credentials.</p>\r\n\t\t\t<p><a href="javascript:void(0)" click.delegate="manageAlert()" >click here</a> to receive an verification email\r\n\t\t\t\t\tthat will redirect you to \'Manage alerts\' page.</p>\t\t\r\n\t\t\t  <p>E-mail will be sent to "mymail@gamil.com"</p>\r\n\t\t</div>\r\n\t\t<div show.bind="closeAlert"><h3>Your email is on its way...</h3>\r\n\t\t\t<a href="javascript:void(0)" click.delegate="closeEmailAlert()" show.bind="closeAlert">close</a>\r\n\t\t\t<p>We\'ve emailed you a link to access your profile</p>\r\n\t\t</div>\t \r\n\t\r\n</template>'}),define("components",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["v1/ph-oauthsignin","v3/ph-global-search","v1/ph-job-status","v2/ph-cookie-popup","v1/ph-language-selector","v1/ph-search-results","v3/ph-job-cart-count","v1/ph-facets","v1/ph-create-job-alert"]}),define("main",["require","exports","./environment","./components"],function(e,t,o,i){"use strict";function a(e){e.use.standardConfiguration().plugin("ph-common").globalResources(i.default),o.default.debug&&e.use.developmentLogging(),window&&(window.localAurelia=e),window.pht=window.pht||{};for(var t=document.querySelectorAll("div.ph-widget-target[data-widget]"),a=0;a<t.length;a++){var r=t[a];if(r){var n=r.getAttribute("type");if(!n||"static"!=n){var s=r.innerHTML,c=r.getAttribute("as-element"),l=r.getAttribute("view")||"default";s&&s.trim().length&&(pht[c+"-"+l]=s.trim()),r.innerHTML=""}}}e.start().then(function(){return e.enhance({},document.body)})}P.config({warnings:{wForgottenReturn:!1}}),t.configure=a}),
document&&document.body&&document.body.setAttribute("aurelia-app","main");